{"version":3,"sources":["webpack:///./public/assets/js/modules/core/EventListeners.js","webpack:///./public/assets/js/modules/core/ExclusiveClickListener.js"],"names":["EventListeners","constructor","this","listeners","getEventId","type","eventId","arguments","length","undefined","Date","getTime","Math","random","toString","add","element","functionRef","addEventListener","remove","_this$listeners$event","removeEventListener","removeAll","Object","keys","forEach","ExclusiveClickListener","stopPropagationEnabled","disableAllPointerEvents","suppressParentsLinkElements","excludeTargetBlank","leftButtonOnly","data","noEventTimeoutAfterVeryFirstClickMs","addElements","elements","addElement","dataItem","noEventsData","push","event","handleVeryFirstClickEvent","handleFollowingClickEvents","clear","clearNoEvents","bind","dataBkp","setTimeout","activateAfterClear","isLeftClickEvent","button","res","Function","stopImmediatePropagation","activateNoEvents","preventDefault","startNoEventTimeout","onCleared","noEventsTimeout","clearTimeout","noEventElements","getParentsLinkElements","addElementNoEvents","pointerEventsProp","style","getPropertyValue","setProperty","pointerEventsBkp","clearNoEventsOnNoEventsItem","noEventsDataItem","removeProperty"],"mappings":"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","file":"main/ExclusiveClickListener-28bff61c.js","sourcesContent":["\r\nexport default class EventListeners {\r\n\tconstructor() {\r\n\t\tthis.listeners = {};\r\n\t}\r\n\r\n\t/**\r\n\t * If not eventId set, generate generic ID\r\n\t * @param {string} type event type key\r\n\t * @param {string} eventId event id\r\n\t */\r\n\tgetEventId(type, eventId = null) {\r\n\t\treturn eventId ?? type + (new Date()).getTime() + Math.random().toString(36);\r\n\t}\r\n\t/**\r\n\t * Subscribe event on element and store data for unsubscribe\r\n\t *\r\n\t * @param {Element} element element where event occurs\r\n\t * @param {string} type event type key\r\n\t * @param {Function} functionRef to run while event occurs\r\n\t * @param {string} eventId event id\r\n\t */\r\n\tadd(element, type, functionRef, eventId = null) {\r\n\t\tif (element && type && functionRef) {\r\n\t\t\tthis.listeners[this.getEventId(type, eventId)] = {\r\n\t\t\t\ttype: type,\r\n\t\t\t\tfunctionRef: functionRef,\r\n\t\t\t\telement: element,\r\n\t\t\t};\r\n\t\t\telement.addEventListener(type, functionRef);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Unsubscribe event on element and delete stored data\r\n\t * @param {string} eventId event id\r\n\t*/\r\n\tremove(eventId) {\r\n\t\tif (this.listeners[eventId] && this.listeners[eventId]) {\r\n\t\t\tconst { element, type, functionRef } = this.listeners[eventId];\r\n\t\t\tif (element && type && functionRef) {\r\n\t\t\t\telement.removeEventListener(type, functionRef);\r\n\t\t\t\tdelete this.listeners[eventId];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Unsubscribe all stored events and delete stored data\r\n\t*/\r\n\tremoveAll() {\r\n\t\tObject.keys(this.listeners).forEach(eventId => {\r\n\t\t\tthis.remove(eventId);\r\n\t\t});\r\n\t}\r\n}","import { getParentsLinkElements } from '../dpitUtilsPublic';\r\nimport EventListeners from './EventListeners';\r\n\r\nexport default class ExclusiveClickListener {\r\n\t/**\r\n\t * Init module for adjusting a click events, so only first event is captured and rest possibly registered events are suppressed \r\n\t *\r\n\t * @param {Function} functionRef to run while event occurs\r\n\t * @param {Boolean} stopPropagationEnabled should be propagation of click events stopped\r\n\t * @param {Boolean} leftButtonOnly only left mouse button is captured\r\n\t */\r\n\tconstructor(functionRef, stopPropagationEnabled = true, disableAllPointerEvents = true, suppressParentsLinkElements = false, excludeTargetBlank = false, leftButtonOnly = true) {\r\n\t\tthis.data = [];\r\n\t\tthis.noEventTimeoutAfterVeryFirstClickMs = 1000;\r\n\t\tthis.stopPropagationEnabled = stopPropagationEnabled;\r\n\t\tthis.leftButtonOnly = leftButtonOnly;\r\n\t\tthis.excludeTargetBlank = excludeTargetBlank;\r\n\t\tthis.disableAllPointerEvents = disableAllPointerEvents;\r\n\t\tthis.suppressParentsLinkElements = suppressParentsLinkElements;\r\n\t\tthis.listeners = new EventListeners();\r\n\t\tthis.functionRef = functionRef;\r\n\t}\r\n\t/**\r\n\t * Subscribe element click events so only first event is captured and rest possibly registered events are suppressed \r\n\t *\r\n\t * @param {HTMLCollection|Array} elements element or elements, where subscribe exclusive click\r\n\t*/\r\n\taddElements(elements) {\r\n\t\tif (elements) {\r\n\t\t\telements.forEach((element) => this.addElement(element));\r\n\t\t}\r\n\t}\r\n\r\n\taddElement(element) {\r\n\t\tif (element) {\r\n\t\t\tconst dataItem = {\r\n\t\t\t\telement: element,\r\n\t\t\t\tnoEventsData: null\r\n\t\t\t};\r\n\t\t\tthis.data.push = dataItem;\r\n\t\t\tthis.listeners.add(element, 'mousedown', (event) => this.handleVeryFirstClickEvent(event, dataItem));\r\n\t\t\tthis.listeners.add(element, 'touchstart', (event) => this.handleVeryFirstClickEvent(event, dataItem));\r\n\t\t\tthis.listeners.add(element, 'click', (event) => this.handleFollowingClickEvents(event, dataItem));\r\n\t\t\tthis.listeners.add(element, 'mouseup', (event) => this.handleFollowingClickEvents(event, dataItem));\r\n\t\t\tthis.listeners.add(element, 'touchend', (event) => this.handleFollowingClickEvents(event, dataItem));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Unsubscribe all subscribed events and clear pointer-events modification\r\n\t * @param {Element} element element to unsubscribe\r\n\t*/\r\n\tclear(immediate = false) {\r\n\r\n\t\tif (immediate) {\r\n\t\t\tthis.data.forEach(this.clearNoEvents.bind(this));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst dataBkp = [...this.data];\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdataBkp.forEach(this.clearNoEvents.bind(this));\r\n\t\t\t}, this.noEventTimeoutAfterVeryFirstClickMs);\r\n\t\t}\r\n\r\n\t\tthis.data = [];\r\n\t\tthis.listeners.removeAll();\r\n\t}\r\n\r\n\tactivateAfterClear() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.clear(true);\r\n\t\t}, this.noEventTimeoutAfterVeryFirstClickMs);\r\n\t}\r\n\r\n\tisLeftClickEvent(event) {\r\n\t\tif (!this.leftButtonOnly) return true;\r\n\t\treturn event.button === 0;\r\n\t}\r\n\r\n\thandleVeryFirstClickEvent(event, dataItem) {\r\n\t\tlet res = true;\r\n\t\tif (this.isLeftClickEvent(event)) {\r\n\t\t\tres = false;\r\n\t\t\t//console.log('handleFollowingClickEvents sssssssssssssssssssssssssssssssssssssssssssssssssssssss', event.type, event);\r\n\t\t\tif (this.functionRef instanceof Function) {\r\n\t\t\t\tres = this.functionRef(event, dataItem.element);\r\n\t\t\t}\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (this.stopPropagationEnabled) event.stopImmediatePropagation();\r\n\t\t\t\tthis.activateNoEvents(dataItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\thandleFollowingClickEvents(event, dataItem) {\r\n\t\t//console.log('handleFollowingClickEvents sssssssssssssssssssssssssssssssssssssssssssssssssssssss', event.type, event);\r\n\t\tif (this.isLeftClickEvent(event)) {\r\n\t\t\tif (event.type === 'click') event.preventDefault();\r\n\t\t\tif (this.stopPropagationEnabled) {\r\n\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t}\r\n\t\t\tthis.activateNoEvents(dataItem);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tstartNoEventTimeout(dataItem, onCleared) {\r\n\t\tif (dataItem.noEventsTimeout) clearTimeout(dataItem.noEventsTimeout);\r\n\t\tdataItem.noEventsTimeout = setTimeout(() => {\r\n\t\t\tthis.clearNoEvents(dataItem);\r\n\t\t\tif (onCleared instanceof Function) onCleared(dataItem.element);\r\n\t\t}, this.noEventTimeoutAfterVeryFirstClickMs);\r\n\t}\r\n\r\n\tactivateNoEvents(dataItem) {\r\n\t\tif (this.disableAllPointerEvents) {\r\n\t\t\tif (!dataItem.noEventsData) {\r\n\t\t\t\tlet noEventElements = [dataItem.element];\r\n\t\t\t\tif (this.suppressParentsLinkElements) {\r\n\t\t\t\t\tnoEventElements = getParentsLinkElements(dataItem.element, true, this.excludeTargetBlank);\r\n\t\t\t\t}\r\n\t\t\t\tnoEventElements.forEach((element) => this.addElementNoEvents(dataItem, element));\r\n\t\t\t\tthis.startNoEventTimeout(dataItem);\r\n\t\t\t} else {\r\n\t\t\t\tthis.startNoEventTimeout(dataItem);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\taddElementNoEvents(dataItem, element) {\r\n\t\tif (dataItem && element) {\r\n\t\t\tconst pointerEventsProp = element.style.getPropertyValue('pointer-events');\r\n\t\t\telement.style.setProperty('pointer-events', 'none', 'important');\r\n\t\t\tif (!dataItem.noEventsData) dataItem.noEventsData = [];\r\n\t\t\tdataItem.noEventsData.push({\r\n\t\t\t\telement,\r\n\t\t\t\tpointerEventsBkp: pointerEventsProp\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tclearNoEvents(dataItem) {\r\n\t\tif (dataItem.noEventsData) {\r\n\t\t\tdataItem.noEventsData.forEach(this.clearNoEventsOnNoEventsItem.bind(this));\r\n\t\t\tif (dataItem.noEventsTimeout) clearTimeout(dataItem.noEventsTimeout);\r\n\t\t\tdataItem.noEventsTimeout = null;\r\n\t\t}\r\n\t\tdataItem.noEventsData = null;\r\n\t}\r\n\r\n\tclearNoEventsOnNoEventsItem(noEventsDataItem) {\r\n\t\tif (noEventsDataItem?.element) {\r\n\t\t\tif (noEventsDataItem.pointerEventsBkp) {\r\n\t\t\t\tnoEventsDataItem.element.style.setProperty('pointer-events', noEventsDataItem.pointerEventsBkp);\r\n\t\t\t}\r\n\t\t\telse noEventsDataItem.element.style.removeProperty('pointer-events');\r\n\t\t}\r\n\t}\r\n\r\n}"],"sourceRoot":""}