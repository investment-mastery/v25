/*!
 * 
 * Intro Tour Tutorial
 * 
 * @author [object Object]
 * @version 6.4.4
 * @link http://www.gnu.org/licenses/gpl-2.0.txt
 * @license GPL-2.0+
 * 
 * Copyright (c) 2023 [object Object]
 * 
 * This plugin is released under GPL-2.0+ license to be included in wordpres.org plugin repository
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackiodpIntroToursmainJsonp=window.wpackiodpIntroToursmainJsonp||[]).push([[10],{61:function(e,t,i){"use strict";i.r(t),i.d(t,"MOB_MENU_STATE",(function(){return a})),i.d(t,"default",(function(){return c}));var n=i(1),s=(i(59),i(6)),o=i(7),r=i(4);const a={unknown:"unknown",closed:"closed",opened:"opened",triggerOpen:"triggerOpen",triggerClose:"triggerClose",opening:"opening",closing:"closing",scrolling:"scrolling"};class c{constructor(e,t){this.onUpdateStateCb=t,this.config=e,this.config.debugEn&&console.log("[dpit] INIT DpitMobileMenu"),this.updateState(a.unknown)}fixAdminMobMenuFocusOut(){this.isAdminMenuToggleFocusFix||(this.isAdminMenuToggleFocusFix=!0,$("#wp-admin-bar-menu-toggle, #adminmenumain").off("focusout"))}getCloserElementSelector(){return this.config.mobile_menu_closer?this.config.mobile_menu_closer:this.config.mobile_menu_opener}toggleClose(e){const t=Object(s.b)(this.getCloserElementSelector());return t?(this.fixAdminMobMenuFocusOut(),$(t).trigger("click"),this.isInTransition(e)):Promise.resolve(n.RES_PROCESS_ASYNC.continue)}toggleOpen(e){const t=Object(s.b)(this.config.mobile_menu_opener);return t?(this.fixAdminMobMenuFocusOut(),$(t).trigger("click"),this.isInTransition(e)):Promise.resolve(n.RES_PROCESS_ASYNC.continue)}updateState(e){if(e!==this.state){this.config.dpDebugEn&&console.log("[dpit] Mob. MENU updated state to:",e);const t=this.state;this.state=e;const i=e===a.opening||e===a.closing;this.onUpdateStateCb instanceof Function&&this.onUpdateStateCb(e,t,i)}}clearInTransitionData(){this.isOverInsensitivity=!1,clearTimeout(this.insensitivityTimeout),this.insensitivityTimeout=null}isInTransition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e?new Promise(i=>{let s=0,r=null,a=!1;this.clearInTransitionData();const c=()=>{if(a)return a=!0,i(n.RES_PROCESS_ASYNC.abort);const u=o.default.fromElement(e,this.isFixedPos);if(r&&o.default.isEqual(u,r)){if(s++,s>15){if(this.isOverInsensitivity&&this.insensitivityTimeout)return this.clearInTransitionData(),a=!0,i(n.RES_PROCESS_ASYNC.continue);this.insensitivityTimeout||(this.insensitivityTimeout=setTimeout(()=>{this.isOverInsensitivity=!0,requestAnimationFrame(c)},t))}}else s=0,r={...u},this.clearInTransitionData();a||requestAnimationFrame(c)};requestAnimationFrame(c)}):Promise.resolve(n.RES_PROCESS_ASYNC.continue)}iterateStateAsOpening(e,t){return this.updateState(e),this.updateMachineAsOpening(t)}async updateMachineAsOpening(e){switch(this.state){case a.unknown:case a.closed:return Object(s.b)(this.config.mobile_menu_opener)?(this.state=a.scrolling,this.scrollToMobileMenuOpener(),this.iterateStateAsOpening(a.triggerOpen,e)):Promise.resolve(n.RES_PROCESS_ASYNC.continue);case a.triggerOpen:{this.updateState(a.opening);const t=await this.toggleOpen(e);switch(t){case n.RES_PROCESS_ASYNC.timeout:case n.RES_PROCESS_ASYNC.continue:return this.iterateStateAsOpening(a.opened,e)}return Promise.resolve(t)}case a.scrolling:case a.opening:case a.opened:default:return Promise.resolve(n.RES_PROCESS_ASYNC.continue)}}iterateStateAsClosing(e,t){return this.updateState(e),this.updateMachineAsClosing(t)}async updateMachineAsClosing(e){switch(this.state){case a.opened:return Object(s.b)(this.getCloserElementSelector())?this.iterateStateAsClosing(a.triggerClose,e):Promise.resolve(n.RES_PROCESS_ASYNC.continue);case a.triggerClose:{this.updateState(a.closing);const t=await this.toggleClose(e);switch(t){case n.RES_PROCESS_ASYNC.timeout:case n.RES_PROCESS_ASYNC.continue:return this.iterateStateAsClosing(a.closed,e)}return Promise.resolve(t)}case a.closing:case a.closed:default:return Promise.resolve(n.RES_PROCESS_ASYNC.continue)}}updateMachine(e,t,i,s){if(e&&!(e instanceof Element))return Promise.reject(new Error("Argument 1 must be an Element"));return s&&(i||this.forceResponsiveMode===n.RESPONSIVE_MODE.mobileMenu)&&this.forceResponsiveMode!==n.RESPONSIVE_MODE.desktop?this.updateMachineAsOpening(e):[a.opened,a.opening].includes(this.state)?this.updateMachineAsClosing(t):void 0}async scrollToMobileMenuOpener(){if(this.config.mobile_menu_opener){const e=Object(s.b)(this.config.mobile_menu_opener);e&&await Object(r.x)(e)}}async forceOpen(){await this.iterateStateAsOpening(a.triggerOpen,null)}update(e,t,i,s,o){if(this.isFixedPos=i,!this.config.mobile_menu_opener)return Promise.resolve(n.RES_PROCESS_ASYNC.continue);try{return this.updateMachine(e,o,t,s,this.forceResponsiveMode)}catch(e){return console.error("[dpit] Mob. MENU ",e),Promise.resolve(n.RES_PROCESS_ASYNC.continue)}}clear(e){return this.state!==a.opened&&this.state!==a.opening||!e?Promise.resolve(n.RES_PROCESS_ASYNC.continue):(this.config.dpDebugEn&&console.log("[dpit] Mob. MENU Closing ... "),this.updateMachineAsClosing(e.element))}}}}]);
//# sourceMappingURL=DpitMobileMenu-c8d59d05.js.map