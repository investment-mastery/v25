{"version":3,"sources":["webpack:///./public/assets/js/modules/core/constants.js","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///./admin/assets/js/dpit-admin-toolbar.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./includes/assets/js/modules/DpitColorAnalyze.js","webpack:///./admin/assets/js/modules/DpitMultiStateAnimBtn.js","webpack:///./admin/assets/js/modules/DpitMultiStateBtn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack:///./node_modules/replace-string/index.js","webpack:///./admin/assets/js/modules/dp-admin-utils.js","webpack:///./public/assets/js/apps/TourStepEditor/store/appMode.js","webpack:///./includes/assets/js/modules/BulletsAnimation.js","webpack:///./node_modules/scroll-into-view/scrollIntoView.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./includes/assets/js/modules/DpitColorWithHslFeatures.js","webpack:///./includes/assets/js/modules/AdminThemeColors.js","webpack:///./admin/assets/js/modules/DpitAdminToolbar.js","webpack:///./includes/assets/js/modules/dpitUtilsInc.js","webpack:///./node_modules/classnames/index.js","webpack:///./includes/assets/js/modules/DpitColor.js","webpack:///./node_modules/url-join/lib/url-join.js"],"names":["VERSION","IS_DEBUG","VISUALIZE_BB","ANIM_DBG","FEATURES","controlsAutoFocusEnable","goldenRatioPosAlgEn","followTargetEn","resizeRefreshEn","finalizeStepChangeEn","userInteraction","CLASSES_CORE","stepSpecifier","themeSpecifier","lightAccent","wrap","highlight","flier","tooltipReference","tooltip","tooltipRadiusPadding","tooltipText","arrow","progress","progressBar","tooltipButtons","bullets","rbAnim","number","button","buttonPrevNextWrap","buttonNext","buttonPrev","buttonSkip","buttonDone","overlay","overlayContainer","disableInteraction","hidden","hiddenKeepEvents","hiddenHard","disabled","tourInRun","pause","noTrans","target","noEvents","targetParent","relativePosition","fixedPosition","targetDummy","isStickyTheme","dpitScrollBar","hasScrollBar","CLASSES_CHILD_POSTFIX","text","icoWrap","ico","spacer","CLASSES_CHILD","numberText","buttonText","buttonSpacer","buttonIco","buttonIcoWrap","MODIFIERS","anim","noOverlay","dummy","inHighlight","sec","vert","symbol","noText","onTooltip","above","click","blockClick","hover","fixed","zIdxFix","customStyle","whiteSpacingNormal","overLeft","overTop","overRight","overBottom","full","EVENTS","started","onInit","onBeforeEnd","ended","beforeStepChange","afterStepChange","onButtonHover","onResize","onBeforeRedirect","onMobileMenuClose","onMobileMenuOpen","onOverlayClick","onNoStepsInit","COMMANDS","goToNext","goToPrev","goToStep","exit","setAccent","switchTheme","setCoreOptions","getCoreOptions","startTour","RESIZE_REACTION","none","soft","hard","RESIZE_TYPE","mobUrlBarVisibilityToggle","orientationToggle","majorAreaChange","minorAreaChange","REFRESH_REASONS","unknown","regular","followTarget","resize","builder","stickyDetector","restore","finalize","RES_PROCESS_ASYNC","skip","abort","continue","timeout","deferred","noData","done","SCROLL_SPEED","constant","logCoef","maxCoef","maxParentScrollTimeMs","RESPONSIVE_MODE","desktop","mobile","mobileMenu","CORE_ENGINES","base","sticky","builderSticky","TIMING","userScrolling","finalizeExit","resizeReaction","defaultIterateAfterClick","finalizeSoftRefresh","defaultFlierScroll","defaultTargetScroll","SIZE_LIMITS_PX","minTooltipContentHeightFixedPos","minTooltipContentHeight","minTooltipHeight","path","replace","window","concat","$","jQuery","dp_admin_toolbar_config","dpDebugEn","console","log","DpitAdminToolbar","document","ready","adminColors","AdminThemeColors","_typeof","obj","Symbol","iterator","constructor","prototype","DpitColorAnalyze","config","srcColor","preferWhiteText","arguments","length","undefined","colorRangeArray","fallBackContrastThreshold","fallbackColor","contrasts","srcColorObj","DpitColor","forEach","color","colorObj","push","contrast","sort","a","b","fallbackColorObj","dpitColors","rgbIdx","res","Array","isArray","Error","colorToMixIn","dpitColorsToSort","compareColorsByRgbHue","_defineProperty","red","green","blue","rgbKey","fromRgb","Math","min","max","getRgbHueFeature","DpitMultiStateAnimBtn","onClickCB","statesOptions","initState","bemRootClass","additionalClasses","inactive","id","htmlTag","event","this","bulletsAnimation","isRunning","stopPropagation","preventDefault","Function","state","currentState","element","createElement","setAttribute","className","classNames","addEventListener","onClickHandler","btnBemClass","initStates","setOnlyState","deactivate","activate","removeStateClass","addStateClass","renderContent","stateEl","stateContent","HTMLElement","appendChild","innerHTML","stateOptions","stateKeys","Object","keys","contentBemClassBase","classList","add","stateOption","newStateOption","content","getButtonElement","destroy","_this$element","removeEventListener","deactivateAll","clearActiveClasses","activeMod","activeClass","remove","setActiveClasses","setOnlyStateTemporarily","followingState","setTimeout","key","_this$stateOptions$ke","style","display","super","BulletsAnimation","startAnimation","backward","loops","loopsPassedCb","isAnimated","start","onAnimationEnded","setProperty","stopAnimation","stop","removeProperty","hideStateItems","opacity","showStateItems","_toPropertyKey","arg","input","hint","prim","toPrimitive","call","TypeError","String","Number","module","exports","string","needle","replacement","options","result","matchCount","prevIndex","fromIndex","index","caseInsensitive","toLowerCase","indexOf","replaceStr","slice","beginSlice","scrollToOriginElementByUrlAndAnimate","async","queryParamsDefs","animationClass","align","top","left","originIdKey","canceledKey","highlightClass","currentUrl","URL","location","originId","getDpUrlParam","getElementById","scrollIntoView","scrollToElementAndAnimate","Promise","resolve","getRedirectUrlQueryString","tourId","builderMode","TargetType","STEP","originArea","Origin","ADMIN","triggerIdx","params","dp_qpb_builder_mode","dp_qpb_builder_origin","dp_qpb_origin_el_id","dp_qp_tour_id","dp_qp_run_always_on_load","dp_qp_trigger_id","buildDpQueryString","isUrlVariableProcessingEnabled","hasClass","getActualVisibleNoticesHeight","each","outerHeight","createOrSetManuallyElement","innerText","AppState","INIT","VIEW","PANEL_EDIT","TARGET_SELECTION","REDIRECT_MODAL_OPENED","TMCE_MODAL_OPENED","REDIRECTING","PROMO_MODAL_OPENED","CANCEL","STEP_CHANGING","PAUSE","PAUSE_TARGET_SEL_1_CLICK","ProcessState","IDLE","PROCESSING","PROCESSED","ERROR","TRIGGER","MOBILE_MENU","URL_VAR_EXAMPLES","FRONTEND","SETTINGS","Position","TOP","BOTTOM","LEFT","RIGHT","rootSelectorOrElement","tickMs","totalSize","visibleSize","activeSize","symmetrical","activeBulletClass","bemRoot","inactiveClass","getModifiedClass","activeHalfSize","floor","getRootElement","querySelector","modifier","rootElement","focus","preventScroll","bulletsLayer","createBullets","startReloadingSpinnerBack","startReloadingSpinner","getLoopTimeMs","count","bulletElements","containerEl","i","bulletEl","activateBullet","activeIdx","idx","distanceFromActive","distanceFromActiveAbs","abs","stopAfterLoopEnd","loopEndCallback","finishAfterLoopEnd","finishAfterLoopEndCallback","_this$bulletsLayer","_this$rootElement","clearBulletActiveStates","stopReloadSpinner","blur","_this$bulletElements","spinnerInterval","clearInterval","bulletHideTimeout","clearTimeout","setInterval","checkAfterLoopEnd","finishLoop","setElementScroll","x","y","self","scrollTo","scrollLeft","scrollTop","animate","parent","scrollSettings","_scrollSettings","maxSynchronousAlignments","parentPosition","differenceX","differenceY","targetWidth","targetHeight","targetPosition","getBoundingClientRect","leftAlign","topAlign","leftOffset","topOffset","leftScalar","topScalar","isWindow","width","innerWidth","height","innerHeight","pageXOffset","pageYOffset","lockX","lockY","offsetLeft","offsetTop","clientWidth","clientHeight","scrollWidth","scrollHeight","getTargetScrollLocation","time","Date","now","startTime","timeValue","endIterations","end","easeValue","ease","scrollAncestor","task","requestAnimationFrame","raf","bind","defaultIsWindow","defaultIsScrollable","getComputedStyle","overflow","defaultValidTarget","findParentElement","el","assignedSlot","parentElement","tagName","ownerDocument","defaultView","ownerWindow","getRootNode","nodeType","host","settings","callback","isNaN","v","pow","parents","validTarget","isScrollable","debug","error","scrollingElements","reduce","cancel","cancelHandler","idle","lastSettings","passiveOptions","passive","endType","cancellable","transitionScrollTo","value","defineProperty","enumerable","configurable","writable","DpitColorWithHslFeatures","lightness","r","rgbObj","g","toHslObj","h","s","l","d","hslObj","hueToRgb","p","q","t","round","setLightness","lightnessVal","fromHslObj","_config$adminColors","_config$adminColors$c","_config$adminColors$c2","colors","legacy","legacyColors","adminColorsObj","colorIdx","adminColor","setAsCssVariable","getContrastColor","actual","addRgbVars","getMostColor","rgbFeatureThresh","rgbDefaults","splice","CLASSES","IDS","BTN_ID","primary","draft","view","preview","renderNow","previewButtonEnabled","onRedirectBtnClick","autoScrollToLastScrollTop","scrollTimeMs","wpCookies","init","scrollToStoredScrollTop","render","adminBarEl","insertAfterEl","initStopWhenInvalidFormSubmitted","buttons","on","stopPrimaryBtnAnimation","setIsChange","isUnsavedChange","wrapEl","primaryBtn","hideButtons","_len","btnIdsToHide","_key","btnIdToHide","_this$buttons$btnIdTo","_this$buttons$btnIdTo2","showButtons","_len2","_key2","_this$buttons$btnIdTo3","_this$buttons$btnIdTo4","showOnlyButton","btnIdToShowOnly","btnId","_this$buttons$btnId","activeOnLoad","renderButtons","after","propagateButtonClick","localId","_this$buttons$localId","sourceEl","getToolbarItemModifiedClass","buttonId","storeButtonData","duplicatedEl","animateAndPropagateClick","actionTitle","storeCurrentScrollTop","checkUnsavedAnimateAndRedirectPropagateClick","primaryButtonEl","args","i18n","storingChanges","draftButtonEl","get","draftBtn","previewButtonEl","label","childNodes","Node","TEXT_NODE","textContent","previewBtn","viewPostButtonEl","viewBtn","redirecting","clearCurrentScrollTopCookie","deleteCookie","setCookie","documentElement","storedScrollTopCookie","getCookie","storedScrollTop","parseInt","isVariableUrl","url","simpleObjectToStr","separator","valueNameSeparator","strToSimpleObject","str","items","split","item","parts","getInfoIconHtml","title","returnJQueryItem","attr","strLastPart","delimiter","def","dataParts","strFirstPart","rightTrimByString","pos","substring","fixQMarkWithNoSlash","qMarkIdx","sanitizePossibleRelativeUrl","mainSiteUrl","forceSlashBeforeQMark","startsWith","urlJoin","absToRelativeUrl","removeURLParameters","parameters","paramKeys","parameter","removeURLParameter","urlParts","prefix","encodeURIComponent","pars","lastIndexOf","join","getDpUrlParamName","unifyUrl","removeQuery","removeHash","removeTrailingSlashes","prependSlash","regExp","endsWith","replaceString","isUrlAtOurSite","urlToTest","siteUrl","queryParamsDefinitions","defVal","searchParams","setDpUrlParam","val","postfixAmpersand","unmappedParams","substr","decodeStepParamAdvancedVal","paramName","stepDefs","mainValOnlyForSimpleVal","onlyValForExtProps","stepDef","extCfg","ext","defMain","dataObj","_dataObj$val","_dataObj","dataObjStr","atob","JSON","parse","_dataObj$ext$id","_dataObj2","_dataObj2$ext","_extCfg$id","_dataObj$ext$id2","_dataObj3","_dataObj3$ext","_extCfg$id2","encodeStepParamAdvancedVal","_stepDefs$paramName","btoa","stringify","initStepParams","stepDefinitions","mainVal","extVals","extName","getNthStr","supEnabled","supStart","supEnd","getCssVar","variableName","tmp","getPropertyValue","updateCssVar","name","textStylesIsFontFamilyVal","$key","includes","setMobileSizeCoef","textStylesCfg","winBB","mobileBreakPoint","mobSizeCoef","mobile_size_coef","all_in_1_size_coef","round1dec","floor1dec","ceil1dec","ceil","round3dec","setTextStyles","_text_styles$font_siz","text_styles","font_size_unit","cssVariables","propName","p_font_size","p_mb","h2_font_size","h5_font_size","unit","unitCnt","h2_mb","h5_mb","percentVal","asyncWait","timeoutMs","loadBuilder","mainCfg","instanceCreatorFce","createNew","tours","mainCfgProcessed","builderOrigin","originHashId","triggerId","inNewWindow","mobileAltStepMode","delay","tourCfg","properties","disableStartAnimation","getAdminBarHeight","scrollIntoViewCore","animTimeMs","addHighlightClass","removeHighlightClickChildSelector","animateElement","animTime","removeHighlightClass","$removeHighlightClickTargetEl","off","contains","wrapElementByContainer","containerClassName","containerId","appendFooterEl","cookie","expiresSeconds","setTime","getTime","expires","toUTCString","cookies","fromEntries","map","decodeURIComponent","getCookieAndDelete","hasOwn","hasOwnProperty","classes","argType","inner","apply","toString","default","src","hexStringToRgbObj","rgbStringToRgbObj","colorDefinition","toRgbStringCommaSeparated","rgbString","match","hex","m","exec","color2","lum1","luminosity","lum2","lum","chan","isDark","isLight","mix","weight","color1","w1","w2","varName","normalize","strArray","resultArray","first","shift","component","definition"],"mappings":"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","file":"main/dpit-admin-toolbar-ebfa94b7.js","sourcesContent":["\r\nexport const VERSION = '5.1.0';\r\n\r\nexport const IS_DEBUG = false;\r\n\r\nexport const VISUALIZE_BB = IS_DEBUG;\r\n\r\nexport const ANIM_DBG = false;\r\n\r\nexport const FEATURES = {\r\n\tcontrolsAutoFocusEnable: true,\r\n\tgoldenRatioPosAlgEn: true,\r\n\tfollowTargetEn: true,\r\n\tresizeRefreshEn: true,\r\n\tfinalizeStepChangeEn: true,\r\n\tuserInteraction: true\r\n};\r\n\r\nexport const CLASSES_CORE = {\r\n\tstepSpecifier: 'dpit-step',\r\n\tthemeSpecifier: 'dpit-theme',\r\n\tlightAccent: 'dpit-light-accent',\r\n\twrap: 'dpit-wrap',\r\n\thighlight: 'dpit-highlight',\r\n\tflier: 'dpit-flier',\r\n\ttooltipReference: 'dpit-tooltip-ref',\r\n\ttooltip: 'dpit-tooltip',\r\n\ttooltipRadiusPadding: 'dpit-tooltip-radius-padding',\r\n\ttooltipText: 'dpit-tooltip-text',\r\n\tarrow: 'dpit-arrow',\r\n\tprogress: 'dpit-progress',\r\n\tprogressBar: 'dpit-progress-bar',\r\n\ttooltipButtons: 'dpit-tooltip-buttons',\r\n\tbullets: 'dpit-bullets',\r\n\trbAnim: 'dpit-anim-rb',\r\n\tnumber: 'dpit-number',\r\n\tbutton: 'dpit-button',\r\n\tbuttonPrevNextWrap: 'dpit-button-pn-wrap',\r\n\tbuttonNext: 'dpit-button--next',\r\n\tbuttonPrev: 'dpit-button--prev',\r\n\tbuttonSkip: 'dpit-button--skip',\r\n\tbuttonDone: 'dpit-button--done',\r\n\toverlay: 'dpit-overlay',\r\n\toverlayContainer: 'dpit-overlay-container',\r\n\tdisableInteraction: 'dpit-disable-interaction',\r\n\thidden: 'dpit-hidden',\r\n\thiddenKeepEvents: 'dpit-hidden-keep-events',\r\n\thiddenHard: 'dpit-hidden-hard',\r\n\tdisabled: 'dpit-disabled',\r\n\ttourInRun: 'dpit-on',\r\n\tpause: 'dpit-pause',\r\n\tnoTrans: 'dpit-no-trans',\r\n\ttarget: 'dpit-target',\r\n\tnoEvents: 'dpit-no-events',\r\n\ttargetParent: 'dpit-target-parent',\r\n\trelativePosition: 'dpit-relative-position',\r\n\tfixedPosition: 'dpit-fixed-position',\r\n\ttargetDummy: 'dpit-target-dummy',\r\n\tisStickyTheme: 'dpit-is-sticky-theme',\r\n\tdpitScrollBar: 'dpit-scrollbar',\r\n\thasScrollBar: 'dpit-has-scrollbar'\r\n};\r\n\r\nexport const CLASSES_CHILD_POSTFIX = {\r\n\ttext: '__text',\r\n\ticoWrap: '__ico-wrap',\r\n\tico: '__ico',\r\n\tspacer: '__spacer'\r\n};\r\n\r\n\r\nexport const CLASSES_CHILD = {\r\n\tnumberText: CLASSES_CORE.number + CLASSES_CHILD_POSTFIX.text,\r\n\tbuttonText: CLASSES_CORE.button + CLASSES_CHILD_POSTFIX.text,\r\n\tbuttonSpacer: CLASSES_CORE.button + CLASSES_CHILD_POSTFIX.spacer,\r\n\tbuttonIco: CLASSES_CORE.button + CLASSES_CHILD_POSTFIX.ico,\r\n\tbuttonIcoWrap: CLASSES_CORE.button + CLASSES_CHILD_POSTFIX.icoWrap,\r\n};\r\n\r\n\r\n\r\nexport const MODIFIERS = {\r\n\tanim: '--anim',\r\n\tnoOverlay: '--no-overlay',\r\n\tdummy: '--dummy',\r\n\tinHighlight: '--in-highlight',\r\n\tsec: '--sec',\r\n\tvert: '--vert',\r\n\tsymbol: '--symbol',\r\n\tnoText: '--no-text',\r\n\tonTooltip: '--on-tooltip',\r\n\tabove: '--above',\r\n\tclick: '--click',\r\n\tblockClick: '--block-click',\r\n\thover: '--hover',\r\n\tfixed: '--fixed',\r\n\tzIdxFix: '--z-idx-fix',\r\n\thidden: '--hidden',\r\n\t'2dig': '--2dig',\r\n\tcustomStyle: '--cs',\r\n\twhiteSpacingNormal: '--wsn',\r\n\toverLeft: '--over-left',\r\n\toverTop: '--over-top',\r\n\toverRight: '--over-right',\r\n\toverBottom: '--over-bottom',\r\n\tfull: '--full'\r\n};\r\n\r\nexport const EVENTS = {\r\n\tstarted: 'started',\r\n\tonInit: 'onInit',\r\n\tonBeforeEnd: 'onBeforeEnd',\r\n\tended: 'ended',\r\n\tbeforeStepChange: 'beforeStepChange',\r\n\tafterStepChange: 'afterStepChange',\r\n\tonButtonHover: 'onButtonHover',\r\n\tonResize: 'onResize',\r\n\tonBeforeRedirect: 'onBeforeRedirect',\r\n\tonMobileMenuClose: 'onMobileMenuClose',\r\n\tonMobileMenuOpen: 'onMobileMenuOpen',\r\n\tonOverlayClick: 'onOverlayClick',\r\n\tonNoStepsInit: 'onNoStepsInit'\r\n};\r\n\r\nexport const COMMANDS = {\r\n\tgoToNext: 'goToNext',\r\n\tgoToPrev: 'goToPrev',\r\n\tgoToStep: 'goToStep',\r\n\texit: 'exit',\r\n\tsetAccent: 'setAccent',\r\n\tswitchTheme: 'switchTheme',\r\n\tsetCoreOptions: 'setCoreOptions',\r\n\tgetCoreOptions: 'getCoreOptions',\r\n\tstartTour: 'startTour'\r\n};\r\n\r\n\r\nexport const RESIZE_REACTION = {\r\n\tnone: 'none',\r\n\tsoft: 'soft',\r\n\thard: 'hard'\r\n};\r\n\r\nexport const RESIZE_TYPE = {\r\n\tmobUrlBarVisibilityToggle: 'mobUrlBarVisibilityToggle',\r\n\torientationToggle: 'orientationToggle',\r\n\tmajorAreaChange: 'majorAreaChange',\r\n\tminorAreaChange: 'minorAreaChange',\r\n};\r\n\r\nexport const REFRESH_REASONS = {\r\n\tunknown: 'unknown',\r\n\tregular: 'regular',\r\n\tfollowTarget: 'follow-target',\r\n\tresize: 'resize',\r\n\tbuilder: 'builder',\r\n\tstickyDetector: 'sticky-detector',\r\n\trestore: 'restore',\r\n\tfinalize: 'finalize',\r\n\tswitchTheme: 'switch-theme'\r\n};\r\n\r\nexport const RES_PROCESS_ASYNC = {\r\n\tskip: 0,\r\n\tabort: -1,\r\n\tcontinue: 1,\r\n\ttimeout: 2,\r\n\tdeferred: 3,\r\n\tnoData: -2,\r\n\tdone: 4\r\n};\r\n\r\nexport const SCROLL_SPEED = {\r\n\tconstant: 1019.4,\r\n\tlogCoef: -214.1,\r\n\tmaxCoef: 3,\r\n\tmaxParentScrollTimeMs: 1000\r\n};\r\n\r\nexport const RESPONSIVE_MODE = {\r\n\tdesktop: 'desktop',\r\n\tmobile: 'mobile',\r\n\tmobileMenu: 'mobileMenu'\r\n};\r\n\r\nexport const CORE_ENGINES = {\r\n\tbase: 'DpitCore',\r\n\tsticky: 'DpitCoreSticky',\r\n\tbuilder: 'DpitBuilderCore',\r\n\tbuilderSticky: 'DpitBuilderCoreSticky',\r\n};\r\n\r\nexport const TIMING = {\r\n\tuserScrolling: 700,\r\n\tfinalizeExit: 500,\r\n\tresizeReaction: 500,\r\n\tdefaultIterateAfterClick: 500,\r\n\tfinalizeSoftRefresh: 250,\r\n\tdefaultFlierScroll: 300,\r\n\tdefaultTargetScroll: 500\r\n};\r\n\r\nexport const SIZE_LIMITS_PX = {\r\n\tminTooltipContentHeightFixedPos: 20,\r\n\tminTooltipContentHeight: 120,\r\n\tminTooltipHeight: 150\r\n};\r\n\r\n","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){const path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","import AdminThemeColors from '../../../includes/assets/js/modules/AdminThemeColors';\r\nimport DpitAdminToolbar from './modules/DpitAdminToolbar';\r\n\r\nwindow.$ = jQuery;\r\nif (window.dp_admin_toolbar_config.dpDebugEn) console.log('[dpit] INIT Admin config:', window.dp_admin_toolbar_config);\r\nnew DpitAdminToolbar(window.dp_admin_toolbar_config);\r\n\r\njQuery(document).ready(() => {\r\n\tif (window.dp_admin_toolbar_config.adminColors) {\r\n\t\tnew AdminThemeColors(window.dp_admin_toolbar_config);\r\n\t}\r\n});\r\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","\r\nimport DpitColor from './DpitColor';\r\nexport default class DpitColorAnalyze {\r\n\tconstructor(config) {\r\n\t\tif (config.dpDebugEn) console.log('[dpit] INIT DpitColorAnalyze');\r\n\t}\r\n\t// contrast range: 1 - 21\r\n\tstatic getContrastColor(srcColor, preferWhiteText = true, colorRangeArray = ['#fff', '#252525'], fallBackContrastThreshold = 3, fallbackColor = '#222') {\r\n\t\tconst contrasts = [];\r\n\t\tconst srcColorObj = new DpitColor(srcColor);\r\n\t\tcolorRangeArray.forEach((color) => {\r\n\t\t\tconst colorObj = new DpitColor(color);\r\n\t\t\tcontrasts.push({\r\n\t\t\t\tcolor: colorObj,\r\n\t\t\t\tcontrast: srcColorObj.contrast(colorObj)\r\n\t\t\t});\r\n\t\t});\r\n\t\tif (contrasts.length) {\r\n\t\t\tif (preferWhiteText) contrasts[0].contrast *= 3.2;\r\n\t\t\telse contrasts[0].contrast *= 1.5;\r\n\t\t\tcontrasts.sort((a, b) => b.contrast - a.contrast);\r\n\t\t\t//console.log(contrasts.map((element) => element.contrast));\r\n\t\t\tif (contrasts[0].contrast < fallBackContrastThreshold) {\r\n\t\t\t\tconst fallbackColorObj = new DpitColor(fallbackColor);\r\n\t\t\t\tcontrasts.push({\r\n\t\t\t\t\tcolor: fallbackColorObj,\r\n\t\t\t\t\tcontrast: srcColorObj.contrast(fallbackColorObj)\r\n\t\t\t\t});\r\n\t\t\t\tcontrasts.sort((a, b) => b.contrast - a.contrast);\r\n\t\t\t}\r\n\t\t\treturn contrasts[0].color;\r\n\t\t}\r\n\t\treturn colorRangeArray && colorRangeArray[0]\r\n\t\t\t? new DpitColor(colorRangeArray[0])\r\n\t\t\t: new DpitColor(fallbackColor);\r\n\t}\r\n\r\n\tstatic getMostColor(dpitColors, rgbIdx /*r = red*, g = green, b = blue*/) {\r\n\t\tlet res = null;\r\n\t\tif (!Array.isArray(dpitColors)) {\r\n\t\t\tthrow new Error('Argument \"mixinColor\" isn\\'t a DpitColor instance, but rather an instance of ' + typeof colorToMixIn);\r\n\t\t}\r\n\t\tconst dpitColorsToSort = [...dpitColors];\r\n\t\tdpitColorsToSort.sort((a, b) => DpitColorAnalyze.compareColorsByRgbHue(rgbIdx, a, b));\r\n\t\tres = dpitColorsToSort[0];\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic getRgbHueFeature = (rgbIdx, color) => {\r\n\t\tswitch (rgbIdx) {\r\n\t\t\tcase 'r': return color.red() + (color.red() - color.green()) + (color.red() - color.blue());\r\n\t\t\tcase 'g': return color.green() + (color.green() - color.red()) + (color.green() - color.blue());\r\n\t\t\tcase 'b': return color.blue() + (color.blue() - color.red()) + (color.blue() - color.green());\r\n\t\t}\r\n\t};\r\n\r\n\tstatic getRgbHueAdjustedColor = (rgbKey, color) => {\r\n\t\tconst addVal = 100;\r\n\t\tswitch (rgbKey) {\r\n\t\t\tcase 'r': return DpitColor.fromRgb(Math.min(color.red() + addVal, 255), Math.max(color.green() - addVal, 0), Math.max(color.blue() - addVal, 0));\r\n\t\t\tcase 'g': return DpitColor.fromRgb(Math.max(color.red() - addVal, 0), Math.min(color.green() + addVal, 255), Math.max(color.blue() - addVal, 0));\r\n\t\t\tcase 'b': return DpitColor.fromRgb(Math.max(color.red() - addVal, 0), Math.max(color.green() - addVal, 0), Math.min(color.blue() + addVal, 255));\r\n\t\t}\r\n\t};\r\n\r\n\tstatic compareColorsByRgbHue = (rgbKey, a, b) => {\r\n\t\treturn DpitColorAnalyze.getRgbHueFeature(rgbKey, b) - DpitColorAnalyze.getRgbHueFeature(rgbKey, a);\r\n\t};\r\n}","import DpitMultiStateBtn from './DpitMultiStateBtn';\r\nimport BulletsAnimation from '../../../../includes/assets/js/modules/BulletsAnimation';\r\n\r\nexport default class DpitMultiStateAnimBtn extends DpitMultiStateBtn {\r\n\r\n\r\n\t/**\r\n\t * \r\n\t * @param {Function} onClickCB\r\n\t * @param {object} statesOptions \r\n\t * {'default': { content: 'Default state label', isActive: true },\r\n\t * \t'success': { content: 'Success message', isActive: true },\r\n\t * \t'error': { content: 'Error message', isActive: true }}\r\n\t * @param {string} initState\r\n\t * @param {string} bemRootClass\r\n\t * @param {Array|string} additionalClasses\r\n\t * @param {string} id\r\n\t * @param {string} htmlTag\r\n\t */\r\n\tconstructor(onClickCB, statesOptions = {}, initState = 'default', bemRootClass = 'dpit-admin-btn', additionalClasses = [], inactive = false, id = '', htmlTag = 'div') {\r\n\t\tsuper(onClickCB, statesOptions, initState, bemRootClass, additionalClasses, inactive, id, htmlTag);\r\n\t\t// Animation\r\n\t\tthis.bulletsAnimation = new BulletsAnimation(this.element, bemRootClass + '__anim', 90, 12, 5, 3);\r\n\t}\r\n\r\n\tstartAnimation(backward = false, loops = -1, loopsPassedCb = null) {\r\n\t\tthis.isAnimated = true;\r\n\t\tthis.bulletsAnimation.start(backward, loops, () => this.onAnimationEnded(loopsPassedCb));\r\n\t\tthis.element.style.setProperty('pointer-events', 'none');\r\n\t\tthis.element.style.setProperty('cursor', 'default');\r\n\t\tthis.addStateClass('anim');\r\n\t}\r\n\r\n\tstopAnimation() {\r\n\t\tthis.bulletsAnimation.stop();\r\n\t\tthis.element.style.removeProperty('pointer-events');\r\n\t\tthis.element.style.removeProperty('cursor');\r\n\t\tthis.removeStateClass('anim');\r\n\t\tthis.isAnimated = false;\r\n\t}\r\n\r\n\tonAnimationEnded(loopsPassedCb = null) {\r\n\t\tthis.stopAnimation();\r\n\t\tif (loopsPassedCb) loopsPassedCb();\r\n\t}\r\n\r\n\thideStateItems() {\r\n\t\tthis.stateKeys.forEach(state => {\r\n\t\t\tconst stateEl = this.stateOptions[state].element;\r\n\t\t\tif (stateEl) {\r\n\t\t\t\tstateEl.style.opacity = 0;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tshowStateItems() {\r\n\t\tthis.stateKeys.forEach(state => {\r\n\t\t\tconst stateEl = this.stateOptions[state].element;\r\n\t\t\tif (stateEl) {\r\n\t\t\t\tstateEl.style.opacity = '';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","import classNames from 'classnames';\r\n\r\n\r\n\r\nexport default class DpitMultiStateBtn {\r\n\r\n\r\n\t/**\r\n\t * \r\n\t * @param {Function} onClickCB\r\n\t * @param {object} statesOptions \r\n\t * { 'default': 'Default state label', 'success': 'Success message', 'error':'Error message' }\r\n\t * @param {string} initState\r\n\t * @param {string} bemRootClass\r\n\t * @param {Array|string} additionalClasses\r\n\t * @param {string} id\r\n\t * @param {string} htmlTag\r\n\t */\r\n\tconstructor(onClickCB, statesOptions = {}, initState = 'default', bemRootClass = 'dpit-btn', additionalClasses = [], inactive = false, id = '', htmlTag = 'div') {\r\n\t\tthis.element = document.createElement(htmlTag);\r\n\t\tif (id) this.element.id = id;\r\n\t\tthis.element.setAttribute('role', 'button');\r\n\t\tif (typeof additionalClasses === 'string') this.element.className = classNames([bemRootClass, additionalClasses]);\r\n\t\telse this.element.className = classNames([bemRootClass, [...additionalClasses]]);\r\n\r\n\t\tthis.element.addEventListener('click', this.onClickHandler);\r\n\t\tthis.btnBemClass = bemRootClass;\r\n\t\tthis.initStates(statesOptions, bemRootClass);\r\n\t\tthis.setOnlyState(initState);\r\n\t\tthis.onClickCB = onClickCB;\r\n\t\tif (inactive) this.deactivate();\r\n\t}\r\n\r\n\tactivate() {\r\n\t\tthis.removeStateClass('inactive');\r\n\t}\r\n\r\n\tdeactivate() {\r\n\t\tthis.addStateClass('inactive');\r\n\t}\r\n\r\n\r\n\trenderContent(stateEl, stateContent) {\r\n\t\tif (stateContent !== null && stateContent !== undefined) {\r\n\t\t\tif (stateContent instanceof HTMLElement) { stateEl.appendChild(stateContent); return true; }\r\n\t\t\telse if (typeof stateContent === 'string') { stateEl.innerHTML = stateContent; return true; }\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tinitStates(statesOptions, btnBemClass) {\r\n\t\tthis.stateOptions = {};\r\n\t\tthis.stateKeys = Object.keys(statesOptions);\r\n\t\tthis.stateKeys.forEach(state => {\r\n\t\t\tconst stateEl = document.createElement('div');\r\n\t\t\tconst contentBemClassBase = btnBemClass + '__content';\r\n\t\t\tstateEl.classList.add(contentBemClassBase);\r\n\t\t\tstateEl.classList.add(contentBemClassBase + '--' + state);\r\n\r\n\t\t\tconst stateOption = statesOptions[state];\r\n\t\t\tif (stateOption) {\r\n\r\n\t\t\t\tlet stateContent = null;\r\n\t\t\t\tlet newStateOption = null;\r\n\t\t\t\tif (typeof stateOption === 'object') {\r\n\t\t\t\t\tstateContent = stateOption.content;\r\n\t\t\t\t\tnewStateOption = { ...stateOption, element: stateEl };\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tstateContent = stateOption;\r\n\t\t\t\t\tnewStateOption = { content: stateOption, element: stateEl };\r\n\t\t\t\t}\r\n\t\t\t\tif (this.renderContent(stateEl, stateContent)) {\r\n\r\n\t\t\t\t\tthis.element.appendChild(stateEl);\r\n\t\t\t\t\tthis.stateOptions[state] = newStateOption;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetButtonElement() {\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.element?.removeEventListener('click', this.onClickHandler);\r\n\t}\r\n\r\n\tdeactivateAll() {\r\n\t\tthis.setOnlyState();\r\n\t}\r\n\r\n\r\n\tclearActiveClasses(state) {\r\n\t\tif (state) {\r\n\t\t\tconst stateOption = this.stateOptions[state];\r\n\t\t\tthis.removeStateClass(stateOption.activeMod);\r\n\t\t\tif (stateOption?.activeClass) this.element.classList.remove(stateOption.activeClass);\r\n\t\t}\r\n\t}\r\n\r\n\tsetActiveClasses(state) {\r\n\t\tconst stateOption = this.stateOptions[state];\r\n\t\tif (stateOption) {\r\n\t\t\tthis.addStateClass(stateOption.activeMod);\r\n\t\t\tif (stateOption?.activeClass) this.element.classList.add(stateOption.activeClass);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveStateClass(state) {\r\n\t\tif (state) this.element.classList.remove(this.btnBemClass + '--' + state);\r\n\t}\r\n\r\n\taddStateClass(state) {\r\n\t\tif (state) this.element.classList.add(this.btnBemClass + '--' + state);\r\n\t}\r\n\r\n\tsetOnlyStateTemporarily(state, followingState = '', timeout = 3000) {\r\n\t\tfollowingState = followingState ? followingState : this.currentState;\r\n\t\tthis.setOnlyState(state);\r\n\t\tif (followingState) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.setOnlyState(followingState);\r\n\t\t\t}, timeout);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOnlyState(state = '') {  // '' => deactivate\r\n\t\tthis.removeStateClass(this.currentState);\r\n\t\tthis.clearActiveClasses(this.currentState);\r\n\t\tthis.stateKeys.forEach(key => {\r\n\t\t\tif (this.stateOptions[key]?.element) {\r\n\t\t\t\tif (state === key) {\r\n\t\t\t\t\tthis.addStateClass(key);\r\n\t\t\t\t\tthis.setActiveClasses(key);\r\n\t\t\t\t}\r\n\t\t\t\tthis.stateOptions[key].element.style.display = state === key ? '' : 'none';\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.currentState = state;\r\n\t}\r\n\r\n\tonClickHandler = (event) => {\r\n\t\tif (this.bulletsAnimation.isRunning) {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (this.onClickCB instanceof Function) {\r\n\t\t\tthis.onClickCB({ state: this.currentState, button: this });\r\n\t\t}\r\n\t};\r\n\r\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","'use strict';module.exports=function(string,needle,replacement){let options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(typeof string!=='string'){throw new TypeError(\"Expected input to be a string, got \".concat(typeof string));}if(!(typeof needle==='string'&&needle.length>0)||!(typeof replacement==='string'||typeof replacement==='function')){return string;}let result='';let matchCount=0;let prevIndex=options.fromIndex>0?options.fromIndex:0;if(prevIndex>string.length){return string;}while(true){// eslint-disable-line no-constant-condition\nconst index=options.caseInsensitive?string.toLowerCase().indexOf(needle.toLowerCase(),prevIndex):string.indexOf(needle,prevIndex);if(index===-1){break;}matchCount++;const replaceStr=typeof replacement==='string'?replacement:replacement(// If `caseInsensitive`` is enabled, the matched substring may be different from the needle.\nstring.slice(index,index+needle.length),matchCount,string,index);// Get the initial part of the string on the first iteration.\nconst beginSlice=matchCount===1?0:prevIndex;result+=string.slice(beginSlice,index)+replaceStr;prevIndex=index+needle.length;}if(matchCount===0){return string;}return result+string.slice(prevIndex);};","import {\r\n\tgetDpUrlParam,\r\n\tbuildDpQueryString,\r\n\tscrollIntoView,\r\n\tscrollToElementAndAnimate\r\n} from '../../../../includes/assets/js/modules/dpitUtilsInc';\r\nimport { Origin, TargetType } from '../../../../public/assets/js/apps/TourStepEditor/store/appMode';\r\n\r\n/**\r\n * \r\n * @param {Object} queryParamsDefs Query param definition object for DPIT\r\n * @param {string} animationClass\r\n * @param {options} options scrollIntoView options see https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\r\n * @param {string} defaultOriginId \r\n * @param {String} originIdKey\r\n * @param {String} canceledKey\r\n * @param {string} highlightClass\r\n */\r\nexport const scrollToOriginElementByUrlAndAnimate = async (\r\n\tqueryParamsDefs,\r\n\tanimationClass = 'dpit-admin-pulse-anim',\r\n\toptions = { align: { top: 0.5, left: 0.5 } },\r\n\toriginIdKey = 'dp_qpb_origin_el_id',\r\n\tcanceledKey = 'dp_qpb_canceled',\r\n\thighlightClass = ''\r\n) => {\r\n\tconst currentUrl = new URL(window.location);\r\n\tlet originId = getDpUrlParam(originIdKey, queryParamsDefs, currentUrl);\r\n\tif (originId) {\r\n\t\tconst element = document.getElementById(originId);\r\n\t\tif (element) {\r\n\t\t\tconst canceled = getDpUrlParam(canceledKey, queryParamsDefs, currentUrl);\r\n\r\n\t\t\tif (canceled === '1') return scrollIntoView(element, options);\r\n\t\t\telse {\r\n\t\t\t\tscrollToElementAndAnimate(element, animationClass, 1000, options, true, '', highlightClass);\r\n\t\t\t\tPromise.resolve(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn Promise.resolve(false);\r\n\t}\r\n\treturn Promise.resolve(false);\r\n};\r\n\r\n\r\nexport const getRedirectUrlQueryString = (queryParamsDefs, tourId, builderMode = TargetType.STEP,\r\n\toriginId = '', originArea = Origin.ADMIN, triggerIdx = null) => {\r\n\t// dp_to_check\r\n\tconst params = {\r\n\t\tdp_qpb_builder_mode: builderMode,\r\n\t\tdp_qpb_builder_origin: originArea,\r\n\t\tdp_qpb_origin_el_id: originId,\r\n\t\tdp_qp_tour_id: tourId,\r\n\t\tdp_qp_run_always_on_load: '1',\r\n\t\tdp_qp_trigger_id: triggerIdx\r\n\t};\r\n\treturn buildDpQueryString(params, queryParamsDefs, '?');\r\n};\r\n\r\n\r\nexport const isUrlVariableProcessingEnabled = () => $('.acf-field[data-name=\"url_vars_enabled\"] .acf-switch').hasClass('-on');\r\n\r\nexport const getActualVisibleNoticesHeight = () => {\r\n\tlet res = 0;\r\n\t$('.notice:visible').each(function () {\r\n\t\tres += $(this).outerHeight(true);\r\n\t});\r\n\treturn res;\r\n};\r\n\r\n\r\nexport const createOrSetManuallyElement = (text, className = '') => {\r\n\tconst element = document.createElement('div');\r\n\telement.className = className;\r\n\telement.innerText = '~ ' + text + ' ~';\r\n\treturn element;\r\n};\r\n\r\n","export const AppState = {\r\n\tINIT: 'INIT',\r\n\tVIEW: 'VIEW',\r\n\tPANEL_EDIT: 'PANEL_EDIT',\r\n\tTARGET_SELECTION: 'TARGET_SELECTION',\r\n\tREDIRECT_MODAL_OPENED: 'REDIRECT_MODAL_OPENED',\r\n\tTMCE_MODAL_OPENED: 'TMCE_MODAL_OPENED',\r\n\tREDIRECTING: 'REDIRECTING',\r\n\tPROMO_MODAL_OPENED: 'PROMO_MODAL_OPENED',\r\n\tCANCEL: 'CANCEL',\r\n\tSTEP_CHANGING: 'STEP_CHANGING',\r\n\tPAUSE: 'PAUSE',\r\n\tPAUSE_TARGET_SEL_1_CLICK: 'PAUSE_TARGET_SEL_1_CLICK',\r\n};\r\n\r\nexport const ProcessState = {\r\n\tIDLE: 'IDLE',\r\n\tPROCESSING: 'PROCESSING',\r\n\tPROCESSED: 'PROCESSED',\r\n\tERROR: 'ERROR',\r\n};\r\n/*\r\nexport const TargetType = {\r\n\tSTEP: '1',\r\n\tTRIGGER: '2',\r\n\tMOBILE_MENU: '3',\r\n\tURL_VAR_EXAMPLES: '4',\r\n};*/\r\n\r\nexport const TargetType = {\r\n\tSTEP: 'step',\r\n\tTRIGGER: 'trigger',\r\n\tMOBILE_MENU: 'mobileMenu',\r\n\tURL_VAR_EXAMPLES: 'urlVarExamples',\r\n};\r\n\r\nexport const Origin = {\r\n\tFRONTEND: 'frontend',\r\n\tADMIN: 'admin',\r\n\tSETTINGS: 'settings',\r\n};\r\n\r\nexport const Position = {\r\n\tTOP: 'TOP',\r\n\tBOTTOM: 'BOTTOM',\r\n\tLEFT: 'LEFT',\r\n\tRIGHT: 'RIGHT',\r\n};\r\n\r\n\r\n","import classNames from 'classnames';\r\n\r\nexport default class BulletsAnimation {\r\n\t/**\r\n\t * Insert animation and highlight class to the element specified by rootSelectorOrElement\r\n\t * @param {Element|String} rootSelectorOrElement\r\n\t * @param {Array|String} additionalClasses\r\n\t * @param {string} removeHighlightClickChildSelector\r\n\t * @param {Number} tickMs\r\n\t * @param {Int} totalSize \r\n\t * @param {Int} visibleSize \r\n\t * @param {Int} activeSize \r\n\t * @param {Bool} symmetrical \r\n\t * @param {string} id\r\n\t * @param {string} activeBulletClass\r\n\t */\r\n\tconstructor(rootSelectorOrElement, additionalClasses = '', tickMs = 70, totalSize = 15, visibleSize = 6, activeSize = 4, symmetrical = true, id = '', activeBulletClass = 'dpit-on') {\r\n\r\n\t\tthis.rootSelectorOrElement = rootSelectorOrElement;\r\n\t\tthis.bemRoot = 'dpit-anim-rb';\r\n\t\tthis.additionalClasses = classNames([additionalClasses, 'dpit-anim-rb']);\r\n\t\tthis.inactiveClass = BulletsAnimation.getModifiedClass(this.bemRoot, 'off');\r\n\t\tthis.activeClass = activeBulletClass;\r\n\t\tthis.id = id;\r\n\t\tthis.visibleSize = visibleSize;\r\n\t\tthis.totalSize = totalSize;\r\n\t\tthis.tickMs = tickMs;\r\n\t\tthis.activeSize = activeSize;\r\n\t\tthis.activeHalfSize = Math.floor(activeSize / 2);\r\n\t\tthis.symmetrical = symmetrical;\r\n\t}\r\n\r\n\tgetRootElement() {\r\n\t\treturn this.rootSelectorOrElement instanceof HTMLElement\r\n\t\t\t? this.rootSelectorOrElement\r\n\t\t\t: document.querySelector(this.rootSelectorOrElement);\r\n\t}\r\n\r\n\tstatic getModifiedClass(bemRoot, modifier) {\r\n\t\tlet res = '';\r\n\t\tif (bemRoot) res = bemRoot + '--';\r\n\t\tres += modifier;\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstart(backward = false, loops = -1, loopsPassedCb = null) {\r\n\t\tthis.backward = backward;\r\n\t\tthis.rootElement = this.getRootElement();\r\n\t\tif (this.rootElement) {\r\n\t\t\tthis.rootElement.focus({ preventScroll: true });\r\n\t\t\tthis.isRunning = true;\r\n\t\t\tif (!this.bulletsLayer) {\r\n\t\t\t\tthis.createBullets(this.visibleSize, this.rootElement);\r\n\t\t\t} else {\r\n\t\t\t\tthis.bulletsLayer.classList.remove(this.inactiveClass);\r\n\t\t\t}\r\n\r\n\t\t\tif (backward) this.startReloadingSpinnerBack(loops, loopsPassedCb);\r\n\t\t\telse this.startReloadingSpinner(loops, loopsPassedCb);\r\n\t\t}\r\n\t}\r\n\r\n\tgetLoopTimeMs() {\r\n\t\treturn this.totalSize * this.tickMs;\r\n\t}\r\n\r\n\tcreateBullets(count, rootElement) {\r\n\r\n\t\tthis.bulletsLayer = document.createElement('div');\r\n\t\tthis.bulletsLayer.className = classNames([this.bemRoot, this.additionalClasses]);\r\n\t\tthis.bulletsLayer.setAttribute('aria-hidden', 'true');\r\n\t\tthis.bulletsLayer.id = this.id;\r\n\t\tthis.bulletsLayer.style.opacity = 0;\r\n\t\tthis.bulletsLayer.style.display = 'block';\r\n\t\tthis.bulletElements = [];\r\n\t\tconst containerEl = document.createElement('div');\r\n\t\tcontainerEl.classList.add(this.bemRoot + '__wrap');\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tconst bulletEl = document.createElement('div');\r\n\t\t\tthis.bulletElements.push(bulletEl);\r\n\t\t\tcontainerEl.appendChild(bulletEl);\r\n\t\t}\r\n\t\tthis.bulletsLayer.appendChild(containerEl);\r\n\t\tthis.bulletsLayer.style.opacity = 1;\r\n\t\trootElement.appendChild(this.bulletsLayer);\r\n\t}\r\n\r\n\r\n\r\n\tactivateBullet(activeIdx) {\r\n\t\tthis.bulletElements.forEach((element, idx) => {\r\n\t\t\tlet className = '';\r\n\t\t\tconst distanceFromActive = activeIdx - idx;\r\n\t\t\tif (distanceFromActive === 0) {\r\n\t\t\t\tclassName = this.activeClass;\r\n\t\t\t} else {\r\n\t\t\t\tconst distanceFromActiveAbs = Math.abs(distanceFromActive);\r\n\t\t\t\tif (this.symmetrical) {\r\n\t\t\t\t\tif (distanceFromActiveAbs <= this.activeHalfSize) {\r\n\t\t\t\t\t\tclassName = this.activeClass + '--' + distanceFromActiveAbs;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (distanceFromActiveAbs < this.activeSize) {\r\n\t\t\t\t\tif (distanceFromActive > 0 && !this.backward) {\r\n\t\t\t\t\t\tclassName = this.activeClass + '--' + distanceFromActiveAbs;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (distanceFromActive < 0 && this.backward) {\r\n\t\t\t\t\t\tclassName = this.activeClass + '--' + distanceFromActiveAbs;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telement.className = className;\r\n\t\t});\r\n\t}\r\n\r\n\tstopAfterLoopEnd(loopEndCallback = null) {\r\n\t\tthis.finishAfterLoopEnd = true;\r\n\t\tthis.finishAfterLoopEndCallback = loopEndCallback;\r\n\t}\r\n\r\n\tstop() {\r\n\t\tthis.bulletsLayer?.classList.add(this.inactiveClass);\r\n\t\tthis.clearBulletActiveStates();\r\n\t\tthis.stopReloadSpinner();\r\n\t\tthis.rootElement?.blur();\r\n\t}\r\n\r\n\tclearBulletActiveStates() {\r\n\t\tthis.bulletElements?.forEach(element => {\r\n\t\t\telement.className = '';\r\n\t\t});\r\n\t}\r\n\r\n\tstopReloadSpinner() {\r\n\t\tif (this.spinnerInterval) clearInterval(this.spinnerInterval);\r\n\t\tthis.spinnerInterval = null;\r\n\t\tthis.isRunning = false;\r\n\t}\r\n\r\n\tstartReloadingSpinner(loops, loopsPassedCb) {\r\n\t\tlet idx = this.symmetrical ? - this.activeHalfSize : 0;\r\n\t\tif (this.spinnerInterval) clearInterval(this.spinnerInterval);\r\n\t\tif (this.bulletHideTimeout) clearTimeout(this.bulletHideTimeout);\r\n\t\tthis.spinnerInterval = setInterval(() => {\r\n\t\t\tthis.activateBullet(idx, idx - 1);\r\n\t\t\tidx++;\r\n\t\t\tif (idx > this.totalSize) {\r\n\t\t\t\tidx = this.symmetrical ? - this.activeHalfSize : 0;\r\n\t\t\t\tthis.checkAfterLoopEnd();\r\n\t\t\t\tif (loops > 0) {\r\n\t\t\t\t\tloops = this.finishLoop(loops, loopsPassedCb);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}, this.tickMs);\r\n\t}\r\n\r\n\tstartReloadingSpinnerBack(loops, loopsPassedCb) {\r\n\t\tif (this.spinnerInterval) clearInterval(this.spinnerInterval);\r\n\t\tif (this.bulletHideTimeout) clearTimeout(this.bulletHideTimeout);\r\n\t\tlet idx = this.symmetrical ? this.visibleSize + this.activeHalfSize : this.visibleSize;\r\n\t\tthis.spinnerInterval = setInterval(() => {\r\n\t\t\tthis.activateBullet(idx);\r\n\t\t\tidx--;\r\n\t\t\tif (idx < this.visibleSize - this.totalSize) {\r\n\t\t\t\tidx = this.symmetrical ? this.visibleSize + this.activeHalfSize : this.visibleSize;\r\n\t\t\t\tthis.checkAfterLoopEnd();\r\n\t\t\t\tif (loops > 0) {\r\n\t\t\t\t\tloops = this.finishLoop(loops, loopsPassedCb);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}, this.tickMs);\r\n\t}\r\n\r\n\tcheckAfterLoopEnd() {\r\n\t\tif (this.finishAfterLoopEnd) {\r\n\t\t\tthis.finishAfterLoopEnd = false;\r\n\t\t\tthis.stop();\r\n\t\t\tif (this.finishAfterLoopEndCallback instanceof Function) this.finishAfterLoopEndCallback();\r\n\t\t\tthis.finishAfterLoopEndCallback = null;\r\n\t\t}\r\n\t}\r\n\r\n\tfinishLoop(loops, loopsPassedCb) {\r\n\t\tif (loops > 0) {\r\n\t\t\tloops--;\r\n\t\t\tif (loops === 0) {\r\n\t\t\t\tthis.stop();\r\n\t\t\t\tif (loopsPassedCb && loopsPassedCb instanceof Function) loopsPassedCb();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loops;\r\n\t}\r\n\r\n}\r\n","var COMPLETE='complete',CANCELED='canceled';function raf(task){if('requestAnimationFrame'in window){return window.requestAnimationFrame(task);}setTimeout(task,16);}function setElementScroll(element,x,y){Math.max(0,x);Math.max(0,y);if(element.self===element){element.scrollTo(x,y);}else{element.scrollLeft=x;element.scrollTop=y;}}function getTargetScrollLocation(scrollSettings,parent){var align=scrollSettings.align,target=scrollSettings.target,targetPosition=target.getBoundingClientRect(),parentPosition,x,y,differenceX,differenceY,targetWidth,targetHeight,leftAlign=align&&align.left!=null?align.left:0.5,topAlign=align&&align.top!=null?align.top:0.5,leftOffset=align&&align.leftOffset!=null?align.leftOffset:0,topOffset=align&&align.topOffset!=null?align.topOffset:0,leftScalar=leftAlign,topScalar=topAlign;if(scrollSettings.isWindow(parent)){targetWidth=Math.min(targetPosition.width,parent.innerWidth);targetHeight=Math.min(targetPosition.height,parent.innerHeight);x=targetPosition.left+parent.pageXOffset-parent.innerWidth*leftScalar+targetWidth*leftScalar;y=targetPosition.top+parent.pageYOffset-parent.innerHeight*topScalar+targetHeight*topScalar;x-=leftOffset;y-=topOffset;x=scrollSettings.align.lockX?parent.pageXOffset:x;y=scrollSettings.align.lockY?parent.pageYOffset:y;differenceX=x-parent.pageXOffset;differenceY=y-parent.pageYOffset;}else{targetWidth=targetPosition.width;targetHeight=targetPosition.height;parentPosition=parent.getBoundingClientRect();var offsetLeft=targetPosition.left-(parentPosition.left-parent.scrollLeft);var offsetTop=targetPosition.top-(parentPosition.top-parent.scrollTop);x=offsetLeft+targetWidth*leftScalar-parent.clientWidth*leftScalar;y=offsetTop+targetHeight*topScalar-parent.clientHeight*topScalar;x-=leftOffset;y-=topOffset;x=Math.max(Math.min(x,parent.scrollWidth-parent.clientWidth),0);y=Math.max(Math.min(y,parent.scrollHeight-parent.clientHeight),0);x=scrollSettings.align.lockX?parent.scrollLeft:x;y=scrollSettings.align.lockY?parent.scrollTop:y;differenceX=x-parent.scrollLeft;differenceY=y-parent.scrollTop;}return{x:x,y:y,differenceX:differenceX,differenceY:differenceY};}function animate(parent){var scrollSettings=parent._scrollSettings;if(!scrollSettings){return;}var maxSynchronousAlignments=scrollSettings.maxSynchronousAlignments;var location=getTargetScrollLocation(scrollSettings,parent),time=Date.now()-scrollSettings.startTime,timeValue=Math.min(1/scrollSettings.time*time,1);if(scrollSettings.endIterations>=maxSynchronousAlignments){setElementScroll(parent,location.x,location.y);parent._scrollSettings=null;return scrollSettings.end(COMPLETE);}var easeValue=1-scrollSettings.ease(timeValue);setElementScroll(parent,location.x-location.differenceX*easeValue,location.y-location.differenceY*easeValue);if(time>=scrollSettings.time){scrollSettings.endIterations++;// Align ancestor synchronously\nscrollSettings.scrollAncestor&&animate(scrollSettings.scrollAncestor);animate(parent);return;}raf(animate.bind(null,parent));}function defaultIsWindow(target){return target.self===target;}function transitionScrollTo(target,parent,settings,scrollAncestor,callback){var idle=!parent._scrollSettings,lastSettings=parent._scrollSettings,now=Date.now(),cancelHandler,passiveOptions={passive:true};if(lastSettings){lastSettings.end(CANCELED);}function end(endType){parent._scrollSettings=null;if(parent.parentElement&&parent.parentElement._scrollSettings){parent.parentElement._scrollSettings.end(endType);}if(settings.debug){console.log('Scrolling ended with type',endType,'for',parent);}callback(endType);if(cancelHandler){parent.removeEventListener('touchstart',cancelHandler,passiveOptions);parent.removeEventListener('wheel',cancelHandler,passiveOptions);}}var maxSynchronousAlignments=settings.maxSynchronousAlignments;if(maxSynchronousAlignments==null){maxSynchronousAlignments=3;}parent._scrollSettings={startTime:now,endIterations:0,target:target,time:settings.time,ease:settings.ease,align:settings.align,isWindow:settings.isWindow||defaultIsWindow,maxSynchronousAlignments:maxSynchronousAlignments,end:end,scrollAncestor};if(!('cancellable'in settings)||settings.cancellable){cancelHandler=end.bind(null,CANCELED);parent.addEventListener('touchstart',cancelHandler,passiveOptions);parent.addEventListener('wheel',cancelHandler,passiveOptions);}if(idle){animate(parent);}return cancelHandler;}function defaultIsScrollable(element){return'pageXOffset'in element||(element.scrollHeight!==element.clientHeight||element.scrollWidth!==element.clientWidth)&&getComputedStyle(element).overflow!=='hidden';}function defaultValidTarget(){return true;}function findParentElement(el){if(el.assignedSlot){return findParentElement(el.assignedSlot);}if(el.parentElement){if(el.parentElement.tagName.toLowerCase()==='body'){return el.parentElement.ownerDocument.defaultView||el.parentElement.ownerDocument.ownerWindow;}return el.parentElement;}if(el.getRootNode){var parent=el.getRootNode();if(parent.nodeType===11){return parent.host;}}}module.exports=function(target,settings,callback){if(!target){return;}if(typeof settings==='function'){callback=settings;settings=null;}if(!settings){settings={};}settings.time=isNaN(settings.time)?1000:settings.time;settings.ease=settings.ease||function(v){return 1-Math.pow(1-v,v/2);};settings.align=settings.align||{};var parent=findParentElement(target),parents=1;function done(endType){parents--;if(!parents){callback&&callback(endType);}}var validTarget=settings.validTarget||defaultValidTarget;var isScrollable=settings.isScrollable;if(settings.debug){console.log('About to scroll to',target);if(!parent){console.error('Target did not have a parent, is it mounted in the DOM?');}}var scrollingElements=[];while(parent){if(settings.debug){console.log('Scrolling parent node',parent);}if(validTarget(parent,parents)&&(isScrollable?isScrollable(parent,defaultIsScrollable):defaultIsScrollable(parent))){parents++;scrollingElements.push(parent);}parent=findParentElement(parent);if(!parent){done(COMPLETE);break;}}return scrollingElements.reduce((cancel,parent,index)=>transitionScrollTo(target,parent,settings,scrollingElements[index+1],done),null);};","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import DpitColor from './DpitColor';\r\n\r\nexport default class DpitColorWithHslFeatures extends DpitColor {\r\n\tlightness() {\r\n\r\n\t\tconst r = this.rgbObj.r / 255;\r\n\t\tconst g = this.rgbObj.g / 255;\r\n\t\tconst b = this.rgbObj.b / 255;\r\n\r\n\t\tconst max = Math.max(r, g, b);\r\n\t\tconst min = Math.min(r, g, b);\r\n\t\treturn (max + min) / 2;\r\n\t}\r\n\r\n\ttoHslObj() {\r\n\t\tconst r = this.rgbObj.r / 255;\r\n\t\tconst g = this.rgbObj.g / 255;\r\n\t\tconst b = this.rgbObj.b / 255;\r\n\r\n\t\tconst max = Math.max(r, g, b);\r\n\t\tconst min = Math.min(r, g, b);\r\n\t\tlet h, s, l = (max + min) / 2;\r\n\r\n\t\tif (max === min) {\r\n\t\t\th = s = 0; // achromatic\r\n\t\t} else {\r\n\t\t\tconst d = max - min;\r\n\t\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n\t\t\tswitch (max) {\r\n\t\t\t\tcase r:\r\n\t\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase g:\r\n\t\t\t\t\th = (b - r) / d + 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase b:\r\n\t\t\t\t\th = (r - g) / d + 4;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\th /= 6;\r\n\t\t}\r\n\r\n\t\treturn { h, s, l };\r\n\t}\r\n\r\n\tstatic fromHslObj(hslObj) {\r\n\t\tlet r, g, b;\r\n\t\tconst { h, s, l } = hslObj;\r\n\t\tif (s === 0) {\r\n\t\t\tr = g = b = l; // achromatic\r\n\t\t} else {\r\n\t\t\tconst hueToRgb = (p, q, t) => {\r\n\t\t\t\tif (t < 0) t += 1;\r\n\t\t\t\tif (t > 1) t -= 1;\r\n\t\t\t\tif (t < 1 / 6) return p + (q - p) * 6 * t;\r\n\t\t\t\tif (t < 1 / 2) return q;\r\n\t\t\t\tif (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n\t\t\t\treturn p;\r\n\t\t\t};\r\n\r\n\t\t\tconst q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n\t\t\tconst p = 2 * l - q;\r\n\r\n\t\t\tr = hueToRgb(p, q, h + 1 / 3);\r\n\t\t\tg = hueToRgb(p, q, h);\r\n\t\t\tb = hueToRgb(p, q, h - 1 / 3);\r\n\t\t}\r\n\r\n\t\treturn new DpitColorWithHslFeatures({\r\n\t\t\tr: Math.round(r * 255),\r\n\t\t\tg: Math.round(g * 255),\r\n\t\t\tb: Math.round(b * 255)\r\n\t\t});\r\n\t}\r\n\r\n\tsetLightness(lightnessVal) {\r\n\t\tconst hslObj = this.toHslObj();\r\n\t\thslObj.l = lightnessVal;\r\n\t\treturn DpitColorWithHslFeatures.fromHslObj(hslObj);\r\n\r\n\t}\r\n\r\n}\r\n","\r\nimport DpitColorWithHslFeatures from './DpitColorWithHslFeatures';\r\nimport DpitColor from './DpitColor';\r\nimport DpitColorAnalyze from './DpitColorAnalyze';\r\n\r\nexport default class AdminThemeColors {\r\n\tconstructor(config) {\r\n\t\tif (config.dpDebugEn) console.log('[dpit] INIT AdminThemeColors');\r\n\t\tif (config.adminColors?.colors?.legacy?.length >= 3) {\r\n\t\t\tconst legacyColors = config.adminColors.colors.legacy;\r\n\t\t\tconst adminColorsObj = [];\r\n\t\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\t\tconst colorIdx = i + 1;\r\n\t\t\t\tif (legacyColors[i]) {\r\n\t\t\t\t\tconst adminColor = new DpitColorWithHslFeatures(legacyColors[i]);\r\n\t\t\t\t\tif (adminColor) {\r\n\t\t\t\t\t\tadminColor.setAsCssVariable(`--dpu-color-${colorIdx}`);\r\n\t\t\t\t\t\tadminColorsObj.push(adminColor);\r\n\t\t\t\t\t\tif (colorIdx === 1) {\r\n\t\t\t\t\t\t\tconst bgAccent = adminColor.setLightness(95);\r\n\t\t\t\t\t\t\tbgAccent.setAsCssVariable(`--dpu-color-${colorIdx}-light`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst textColor = DpitColorAnalyze.getContrastColor(legacyColors[i], true);\r\n\t\t\t\t\t\ttextColor.setAsCssVariable(`--dpu-color-${colorIdx}-text`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (config.adminColors.colors.actual) {\r\n\t\t\t\tObject.keys(config.adminColors.colors.actual).forEach(key => {\r\n\t\t\t\t\tconst adminColor = new DpitColorWithHslFeatures(config.adminColors.colors.actual[key]);\r\n\t\t\t\t\tif (adminColor) {\r\n\t\t\t\t\t\tadminColorsObj.push(adminColor);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (adminColorsObj && config.adminColors.addRgbVars) {\r\n\t\t\t\t['r', 'b', 'g'].forEach((rgbIdx) => {\r\n\t\t\t\t\tlet color = DpitColorAnalyze.getMostColor(adminColorsObj, rgbIdx);\r\n\t\t\t\t\tif (config.adminColors.rgbFeatureThresh && config.adminColors.rgbDefaults && config.adminColors.rgbDefaults[rgbIdx]) {\r\n\t\t\t\t\t\tconst feature = DpitColorAnalyze.getRgbHueFeature(rgbIdx, color);\r\n\t\t\t\t\t\t//console.log('Color: ', color, 'RGB:', rgbIdx, 'Feature:', feature);\r\n\t\t\t\t\t\tif (feature < config.adminColors.rgbFeatureThresh) {\r\n\t\t\t\t\t\t\t/*if (rgbIdx !== 'r') color = DpitColorAnalyze.getRgbHueAdjustedColor(rgbIdx, color);\r\n\t\t\t\t\t\t\t\telse color = Color(config.adminColors.rgbDefaults[rgbIdx]);*/\r\n\t\t\t\t\t\t\t//color = Color(config.adminColors.rgbDefaults[rgbIdx]);\r\n\t\t\t\t\t\t\tcolor = new DpitColor(config.adminColors.rgbDefaults[rgbIdx]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolor.setAsCssVariable(`--dpu-color-${rgbIdx}`);\r\n\t\t\t\t\tconst textColor = DpitColorAnalyze.getContrastColor(color);\r\n\t\t\t\t\ttextColor.setAsCssVariable(`--dpu-color-${rgbIdx}-text`);\r\n\t\t\t\t\tconst index = adminColorsObj.indexOf(color);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tadminColorsObj.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n}\r\n","import classNames from 'classnames';\r\nimport DpitMultiStateAnimBtn from './DpitMultiStateAnimBtn';\r\n\r\nimport {\r\n\tgetActualVisibleNoticesHeight\r\n} from './dp-admin-utils';\r\n\r\nimport {\r\n\tgetCookie,\r\n\tsetCookie,\r\n\tdeleteCookie\r\n} from '../../../../includes/assets/js/modules/dpitUtilsInc';\r\nimport { ANIM_DBG } from '../../../../public/assets/js/modules/core/constants';\r\n\r\n\r\nexport const CLASSES = {\r\n\trootWrap: 'dpit-tool-bar',\r\n\tbutton: 'dpit-admin-btn',\r\n\ttoolbarItem: 'dpit-tool-bar__item',\r\n\tbuttonPrimary: 'button-primary',\r\n\tbuttonSecondary: 'button-secondary'\r\n};\r\n\r\n\r\nexport const IDS = {\r\n\tmain: 'dpit-tool-bar',\r\n\tinsertAfterEl: 'wp-admin-bar-top-secondary',\r\n\twpAdminBar: 'wpadminbar'\r\n};\r\n\r\nexport const BTN_ID = {\r\n\tprimary: 'primary',\r\n\tdraft: 'draft',\r\n\tview: 'view',\r\n\tpreview: 'preview'\r\n};\r\n\r\nexport default class DpitAdminToolbar {\r\n\r\n\tconstructor(config, renderNow = true, previewButtonEnabled = true, onRedirectBtnClick = null, autoScrollToLastScrollTop = false, scrollTimeMs = 0) {\r\n\t\tif (config.dpDebugEn) console.log('[dpit] INIT DpitAdminToolbar');\r\n\t\twindow.wpCookies = window.wpCookies || {};\r\n\t\tthis.config = config;\r\n\t\tthis.config.previewButtonEnabled = previewButtonEnabled;\r\n\t\tthis.onRedirectBtnClick = onRedirectBtnClick;\r\n\t\tthis.init(config);\r\n\t\tif (autoScrollToLastScrollTop) this.scrollToStoredScrollTop(scrollTimeMs);\r\n\t\tif (renderNow) this.render();\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.adminBarEl = document.getElementById(IDS.wpAdminBar);\r\n\t\tif (this.adminBarEl) {\r\n\t\t\tthis.insertAfterEl = this.adminBarEl.querySelector('#' + IDS.insertAfterEl);\r\n\t\t\tthis.initStopWhenInvalidFormSubmitted();\r\n\t\t}\r\n\t\tthis.buttons = {};\r\n\t}\r\n\r\n\tinitStopWhenInvalidFormSubmitted() {\r\n\t\t$('#wpbody-content input').on('invalid', () => {\r\n\t\t\tthis.stopPrimaryBtnAnimation();\r\n\t\t});\r\n\t}\r\n\r\n\tsetIsChange() {\r\n\t\tthis.isUnsavedChange = true;\r\n\t}\r\n\r\n\tactivate() {\r\n\t\tthis.wrapEl.classList.remove(CLASSES.rootWrap + '--inactive');\r\n\t}\r\n\r\n\tdeactivate() {\r\n\t\tthis.wrapEl.classList.add(CLASSES.rootWrap + '--inactive');\r\n\t}\r\n\r\n\tstopPrimaryBtnAnimation() {\r\n\t\tif (this.primaryBtn) this.primaryBtn.stopAnimation();\r\n\t}\r\n\r\n\thideButtons(...btnIdsToHide) {\r\n\t\tif (btnIdsToHide) {\r\n\t\t\tbtnIdsToHide.forEach(btnIdToHide => {\r\n\t\t\t\tif (this.buttons[btnIdToHide]?.element) {\r\n\t\t\t\t\tthis.buttons[btnIdToHide]?.element.classList.add(CLASSES.toolbarItem + '--inactive');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tshowButtons(...btnIdsToHide) {\r\n\t\tif (btnIdsToHide) {\r\n\t\t\tbtnIdsToHide.forEach(btnIdToHide => {\r\n\t\t\t\tif (this.buttons[btnIdToHide]?.element) {\r\n\t\t\t\t\tthis.buttons[btnIdToHide]?.element.classList.remove(CLASSES.toolbarItem + '--inactive');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tshowOnlyButton(btnIdToShowOnly) {\r\n\t\tObject.keys(this.buttons).forEach(btnId => {\r\n\t\t\tif (btnId !== btnIdToShowOnly && this.buttons[btnId]?.element) {\r\n\t\t\t\tthis.buttons[btnId].element.classList.add(CLASSES.toolbarItem + '--inactive');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender(activeOnLoad = true) {\r\n\t\tif (!this.wrapEl && this.insertAfterEl) {\r\n\t\t\tthis.wrapEl = document.createElement('div');\r\n\t\t\tthis.wrapEl.id = IDS.main;\r\n\t\t\tthis.wrapEl.className = classNames([CLASSES.rootWrap, 'ab-top-secondary ab-top-menu']);\r\n\t\t\tthis.renderButtons(this.wrapEl);\r\n\r\n\t\t\tthis.insertAfterEl.after(this.wrapEl);\r\n\t\t\t// animate slide left\r\n\t\t\tif (activeOnLoad) addEventListener('load', this.activate.bind(this));\r\n\t\t\telse setTimeout(() => { this.activate(); }, 100);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpropagateButtonClick(localId) {\r\n\t\tif (this.buttons[localId]?.sourceEl) {\r\n\t\t\tthis.buttons[localId].sourceEl.click();\r\n\t\t}\r\n\t}\r\n\r\n\tgetToolbarItemModifiedClass(buttonId) {\r\n\t\treturn CLASSES.toolbarItem + '--' + buttonId;\r\n\t}\r\n\r\n\r\n\tstoreButtonData(buttonId, sourceEl, duplicatedEl) {\r\n\t\tthis.buttons[buttonId] = {\r\n\t\t\telement: duplicatedEl,\r\n\t\t\tsourceEl: sourceEl\r\n\t\t};\r\n\t}\r\n\r\n\tanimateAndPropagateClick(buttonId, button, actionTitle = '') {\r\n\t\tif (button) button.startAnimation();\r\n\t\tthis.showOnlyButton(buttonId);\r\n\t\tthis.storeCurrentScrollTop();\r\n\t\tif (this.onRedirectBtnClick) this.onRedirectBtnClick(buttonId, actionTitle);\r\n\t\tif (!ANIM_DBG) this.propagateButtonClick(buttonId);\r\n\t}\r\n\r\n\tcheckUnsavedAnimateAndRedirectPropagateClick(buttonId, button, actionTitle = '') {\r\n\t\tif (!this.isUnsavedChange) {\r\n\t\t\tthis.animateAndPropagateClick(buttonId, button, actionTitle);\r\n\t\t} else {\r\n\t\t\tthis.storeCurrentScrollTop();\r\n\t\t\tthis.propagateButtonClick(buttonId);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\trenderButtons(wrapEl) {\r\n\t\t// primary button\r\n\t\tconst primaryButtonEl = document.querySelector('#wpbody-content .wrap input[type=\"submit\"].button-primary:not(.find-box input, .widget-control-save, #screen-options-wrap input, #bulk_edit)');\r\n\t\tif (primaryButtonEl) {\r\n\t\t\tthis.primaryBtn = new DpitMultiStateAnimBtn(\r\n\t\t\t\t(args) => this.animateAndPropagateClick(BTN_ID.primary, args?.button, this.config.i18n.storingChanges),\r\n\t\t\t\t{ 'default': primaryButtonEl.value },\r\n\t\t\t\t'default',\r\n\t\t\t\tCLASSES.button,\r\n\t\t\t\t[CLASSES.toolbarItem, CLASSES.buttonPrimary]\r\n\t\t\t);\r\n\t\t\tif (this.primaryBtn) {\r\n\t\t\t\tthis.storeButtonData(\r\n\t\t\t\t\tBTN_ID.primary,\r\n\t\t\t\t\tprimaryButtonEl,\r\n\t\t\t\t\tthis.primaryBtn.element\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// draft button\r\n\t\tconst draftButtonEl = $('#wpbody-content .wrap input[type=\"submit\"]#save-post:visible:not(.find-box input)').get(0); // jquery becaluse of :visible:not(.find-box input)\r\n\t\tif (draftButtonEl) {\r\n\t\t\tthis.draftBtn = new DpitMultiStateAnimBtn(\r\n\t\t\t\t(args) => this.animateAndPropagateClick(BTN_ID.draft, args?.button, this.config.i18n.storingChanges),\r\n\t\t\t\t{ 'default': draftButtonEl.value },\r\n\t\t\t\t'default',\r\n\t\t\t\tCLASSES.button,\r\n\t\t\t\t[CLASSES.toolbarItem, CLASSES.buttonSecondary]\r\n\t\t\t);\r\n\t\t\tif (this.draftBtn) {\r\n\t\t\t\tthis.storeButtonData(\r\n\t\t\t\t\tBTN_ID.draft,\r\n\t\t\t\t\tdraftButtonEl,\r\n\t\t\t\t\tthis.draftBtn.element\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.config.previewButtonEnabled) {\r\n\r\n\t\t\t// preview post button\r\n\t\t\tconst previewButtonEl = document.getElementById('post-preview');\r\n\t\t\tif (previewButtonEl) {\r\n\t\t\t\tlet label = '';\r\n\t\t\t\tfor (var i = 0; i < previewButtonEl.childNodes.length; ++i) {\r\n\t\t\t\t\tif (previewButtonEl.childNodes[i].nodeType === Node.TEXT_NODE) {\r\n\t\t\t\t\t\tlabel += previewButtonEl.childNodes[i].textContent;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.previewBtn = new DpitMultiStateAnimBtn(\r\n\t\t\t\t\t() => this.propagateButtonClick(BTN_ID.preview),\r\n\t\t\t\t\t{ 'default': label },\r\n\t\t\t\t\t'default',\r\n\t\t\t\t\tCLASSES.button,\r\n\t\t\t\t\t[CLASSES.toolbarItem, CLASSES.buttonSecondary]\r\n\t\t\t\t);\r\n\t\t\t\tif (this.previewBtn) {\r\n\t\t\t\t\tthis.storeButtonData(\r\n\t\t\t\t\t\tBTN_ID.preview,\r\n\t\t\t\t\t\tpreviewButtonEl,\r\n\t\t\t\t\t\tthis.previewBtn.element\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// view post button\r\n\t\tconst viewPostButtonEl = document.querySelector('#wp-admin-bar-view a');\r\n\t\tif (viewPostButtonEl) {\r\n\t\t\tthis.viewBtn = new DpitMultiStateAnimBtn(\r\n\t\t\t\t(args) => this.checkUnsavedAnimateAndRedirectPropagateClick(BTN_ID.view, args?.button, this.config.i18n.redirecting),\r\n\t\t\t\t{ 'default': viewPostButtonEl.textContent },\r\n\t\t\t\t'default',\r\n\t\t\t\tCLASSES.button,\r\n\t\t\t\t[CLASSES.toolbarItem, CLASSES.buttonSecondary]\r\n\t\t\t);\r\n\t\t\tif (this.viewBtn) {\r\n\t\t\t\tthis.storeButtonData(\r\n\t\t\t\t\tBTN_ID.view,\r\n\t\t\t\t\tviewPostButtonEl,\r\n\t\t\t\t\tthis.viewBtn.element\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tObject.keys(this.buttons).forEach(btnId => {\r\n\t\t\tif (this.buttons[btnId]) {\r\n\t\t\t\twrapEl.appendChild(this.buttons[btnId].element);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tclearCurrentScrollTopCookie() {\r\n\t\tdeleteCookie('dpit-admin-edit-st');\r\n\t}\r\n\r\n\tstoreCurrentScrollTop() {\r\n\t\tsetCookie('dpit-admin-edit-st', document.documentElement.scrollTop - getActualVisibleNoticesHeight(), 60);\r\n\t\tconsole.log('storeCurrentScrollTop');\r\n\t}\r\n\r\n\tscrollToStoredScrollTop(scrollTimeMs = 0) {\r\n\t\tconst storedScrollTopCookie = getCookie('dpit-admin-edit-st');\r\n\t\tif (storedScrollTopCookie) {\r\n\t\t\tlet storedScrollTop = parseInt(storedScrollTopCookie, 10);\r\n\t\t\tif (!isNaN(storedScrollTop)) {\r\n\t\t\t\tstoredScrollTop += getActualVisibleNoticesHeight();\r\n\t\t\t\tif (scrollTimeMs > 0) $(document.documentElement).animate({ scrollTop: storedScrollTop }, scrollTimeMs);\r\n\t\t\t\telse $(document.documentElement).scrollTop(storedScrollTop);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis.clearCurrentScrollTopCookie();\r\n\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n","import scrollIntoViewCore from 'scroll-into-view';\r\nimport replaceString from 'replace-string';\r\nimport urlJoin from 'url-join';\r\nimport { RESPONSIVE_MODE } from '../../../../public/assets/js/modules/core/constants';\r\nimport { TargetType } from '../../../../public/assets/js/apps/TourStepEditor/store/appMode';\r\n\r\n\r\n\r\nexport const init = (dpDebugEn) => {\r\n\tif (dpDebugEn) console.log('[dpit] INIT dpitUtilsInc');\r\n};\r\n\r\nexport const strCapitalize = (inputString) => {\r\n\treturn inputString.charAt(0).toUpperCase() + inputString.slice(1);\r\n};\r\n\r\nexport const isVariableUrl = (url) => {\r\n\tconst start = url.indexOf('{');\r\n\tconst stop = url.indexOf('}');\r\n\treturn start >= 0 && stop > start;\r\n};\r\n\r\nexport const fillUrlVariables = (urlVars, url) => {\r\n\tif (urlVars && url) {\r\n\t\tObject.keys(urlVars).forEach((varId) => {\r\n\t\t\turl = replaceString(url, `{${varId}}`, urlVars[varId]);\r\n\t\t});\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const simpleObjectToStr = (obj, separator = '|', valueNameSeparator = '=') => {\r\n\tlet res = '';\r\n\tif (obj) {\r\n\t\tObject.keys(obj).forEach((key, idx) => {\r\n\t\t\tif (idx != 0) res += separator;\r\n\t\t\tres += `${key}${valueNameSeparator}${obj[key]}`;\r\n\t\t});\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const strToSimpleObject = (str, separator = '|', valueNameSeparator = '=') => {\r\n\tconst res = {};\r\n\tif (str) {\r\n\t\tconst items = str.split(separator);\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\tconst parts = item.split(valueNameSeparator);\r\n\t\t\t\tif (parts && parts.length >= 2) {\r\n\t\t\t\t\tres[parts[0]] = parts[1];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const getInfoIconHtml = (className, text, title = '', returnJQueryItem = true) => {\r\n\tif (title) text = `<strong class=\"info-tip-title\">${title}</strong>${text}`;\r\n\tif (returnJQueryItem) return $(`<div class=\"${className}\"></div>`).attr('data-info-text', text);\r\n\telse return `<div class='${className}' data-info-text='${text}'></div>`;\r\n};\r\n\r\nexport const strLastPart = (text, delimiter = '.', def = '') => {\r\n\tconst dataParts = text.split(delimiter);\r\n\tif (dataParts && dataParts.length > 0) {\r\n\t\treturn dataParts[dataParts.length - 1];\r\n\t}\r\n\treturn def;\r\n};\r\n\r\nexport const strFirstPart = (text, delimiter = '.', def = '') => {\r\n\tconst dataParts = text.split(delimiter);\r\n\tif (dataParts && dataParts.length > 0) {\r\n\t\treturn dataParts[0];\r\n\t}\r\n\treturn def;\r\n};\r\n\r\nexport const rightTrimByString = (url, delimiter = '.') => {\r\n\r\n\tconst pos = url.indexOf(delimiter);\r\n\tif (pos >= 0) {\r\n\t\treturn url.substring(0, pos);\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const fixQMarkWithNoSlash = (url) => {\r\n\tconst qMarkIdx = url.indexOf('?');\r\n\tif (qMarkIdx >= 0) {\r\n\t\tif (qMarkIdx === 0 || url[qMarkIdx - 1] != '/') {\r\n\t\t\turl = `${url.substring(0, qMarkIdx)}/${url.substring(qMarkIdx)}`;\r\n\t\t}\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const forceQMarkWithoutSlash = (url) => {\r\n\tconst qMarkIdx = url.indexOf('?');\r\n\tif (qMarkIdx > 0 && url[qMarkIdx - 1] == '/') {\r\n\t\turl = url.substring(0, qMarkIdx - 1) + url.substring(qMarkIdx);\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const sanitizePossibleRelativeUrl = (url, mainSiteUrl, forceSlashBeforeQMark = false) => {\r\n\tif (url.startsWith('/')) {\r\n\t\turl = urlJoin(mainSiteUrl, url);\r\n\t\tif (forceSlashBeforeQMark) {\r\n\t\t\turl = fixQMarkWithNoSlash(url);\r\n\t\t}\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const absToRelativeUrl = (url, mainSiteUrl) => {\r\n\tif (mainSiteUrl && url.startsWith(mainSiteUrl)) {\r\n\t\turl = url.substring(mainSiteUrl.length);\r\n\t\tif (!url.startsWith('/')) url = `/${url}`;\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const removeURLParameter = (url, parameter) => {\r\n\t// prefer to use l.search if you have a location/link object\r\n\tconst urlParts = url.split('?');\r\n\tif (urlParts.length >= 2) {\r\n\t\tconst prefix = `${encodeURIComponent(parameter)}=`;\r\n\t\tconst pars = urlParts[1].split(/[&;]/g);\r\n\r\n\t\t// reverse iteration as may be destructive\r\n\t\tfor (let i = pars.length; i-- > 0;) {\r\n\t\t\t// idiom for string.startsWith\r\n\t\t\tif (pars[i].lastIndexOf(prefix, 0) !== -1) {\r\n\t\t\t\tpars.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn urlParts[0] + (pars.length > 0 ? `?${pars.join('&')}` : '');\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const removeURLParameters = (url, parameters) => {\r\n\tlet paramKeys = parameters;\r\n\tif (!Array.isArray(parameters)) paramKeys = Object.keys(parameters);\r\n\tparamKeys.forEach((parameter) => {\r\n\t\turl = removeURLParameter(url, getDpUrlParamName(parameter, parameters));\r\n\t});\r\n\treturn url;\r\n};\r\n\r\nexport const unifyUrl = (url, removeQuery = true, removeHash = true, removeTrailingSlashes = true, prependSlash = false) => {\r\n\tif (url) {\r\n\t\turl = strLastPart(url, '://', url);\r\n\t\tif (url && url.startsWith('www.')) url = url.substring(4);\r\n\t\tif (url && removeHash) url = strFirstPart(url, '#', url);\r\n\t\tif (url && removeQuery) {\r\n\t\t\turl = strFirstPart(url, '?', url);\r\n\t\t} else {\r\n\t\t\turl = fixQMarkWithNoSlash(url);\r\n\t\t}\r\n\t\tif (url) {\r\n\t\t\tlet regExp = /\\/+$/;\r\n\t\t\tif (!removeTrailingSlashes) {\r\n\t\t\t\tregExp = /^\\/+/g;\r\n\t\t\t}\r\n\t\t\turl = url.replace(regExp, '');\r\n\t\t}\r\n\t\tif (url && prependSlash) {\r\n\t\t\turl = `/${url}`;\r\n\t\t}\r\n\t}\r\n\tif (!url) {\r\n\t\turl = '/';\r\n\t}\r\n\telse {\r\n\t\tif (url.endsWith('/index.php')) {\r\n\t\t\turl = rightTrimByString(url, '/index.php');\r\n\t\t} else if (!removeQuery) {\r\n\t\t\turl = replaceString(url, '/index.php/', '/');\r\n\t\t}\r\n\t}\r\n\treturn url;\r\n};\r\n\r\nexport const isUrlAtOurSite = (urlToTest, siteUrl) => {\r\n\treturn urlToTest.startsWith(siteUrl);\r\n};\r\n/*\r\nexport const isUrlAtOurSite = (urlToTest, siteUrl) => {\r\n\tlet urlToTestAbs = sanitizePossibleRelativeUrl(urlToTest, siteUrl);\r\n\treturn urlToTestAbs.startsWith(siteUrl);\r\n\r\n};*/\r\n\r\n\r\nexport const getDpUrlParamName = (id, queryParamsDefinitions) => {\r\n\tlet res = id;\r\n\tif (queryParamsDefinitions) res = queryParamsDefinitions[id];\r\n\treturn res;\r\n};\r\n\r\nexport const getDpUrlParam = (id, queryParamsDefinitions, currentUrl = null, defVal = null) => {\r\n\tlet res = defVal;\r\n\tconst key = getDpUrlParamName(id, queryParamsDefinitions);\r\n\tif (key) {\r\n\t\tif (!currentUrl) currentUrl = new URL(window.location);\r\n\t\tres = currentUrl.searchParams.get(key);\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const setDpUrlParam = (id, queryParamsDefinitions, val, postfixAmpersand = true) => {\r\n\tlet res = '';\r\n\tconst key = getDpUrlParamName(id, queryParamsDefinitions);\r\n\tif (key) {\r\n\t\tres = key + '=' + val;\r\n\t\tif (postfixAmpersand) res += '&';\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const buildDpQueryString = (params, queryParamsDefinitions, prefix = '?', unmappedParams = null) => {\r\n\tlet res = prefix;\r\n\tif (unmappedParams) {\r\n\t\tconst idsUm = Object.keys(unmappedParams);\r\n\t\tidsUm.forEach((id) => {\r\n\t\t\tif (unmappedParams[id] !== null && unmappedParams[id] !== undefined && unmappedParams[id] !== '')\r\n\t\t\t\tres += id + '=' + unmappedParams[id] + '&';\r\n\t\t});\r\n\t}\r\n\tif (params) {\r\n\t\tconst ids = Object.keys(params);\r\n\t\tids.forEach((id) => {\r\n\t\t\tif (params[id] !== null && params[id] !== undefined && params[id] !== '')\r\n\t\t\t\tres += setDpUrlParam(id, queryParamsDefinitions, params[id]);\r\n\t\t});\r\n\t}\r\n\r\n\tif (res && res[res.length - 1] == '&') res = res.substr(0, res.length - 1);\r\n\tif (res == prefix) res = '';\r\n\treturn res;\r\n};\r\n\r\nexport const decodeStepParamAdvancedVal = (value, paramName, stepDefs, mainValOnlyForSimpleVal = true, onlyValForExtProps = false) => {\r\n\tconst stepDef = stepDefs?.[paramName];\r\n\tconst extCfg = stepDef?.ext;\r\n\tlet res = {\r\n\t\tval: value ?? stepDef?.defMain,\r\n\t\text: {}\r\n\t};\r\n\tif (value?.startsWith('base64__') || extCfg) {\r\n\t\tlet dataObj = null;\r\n\t\tif (value?.startsWith('base64__')) {\r\n\t\t\tconst dataObjStr = atob(value.substr(8));\r\n\t\t\tdataObj = dataObjStr ? JSON.parse(dataObjStr) : null;\r\n\t\t\tres.val = dataObj?.val ?? stepDef?.defMain;\r\n\t\t}\r\n\t\tif (extCfg) {\r\n\t\t\tObject.keys(extCfg).forEach(id => {\r\n\t\t\t\tif (onlyValForExtProps) {\r\n\t\t\t\t\tres.ext[id] = dataObj?.ext?.[id] ?? extCfg[id]?.def;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.ext[id] = {\r\n\t\t\t\t\t\t...extCfg[id],\r\n\t\t\t\t\t\tval: dataObj?.ext?.[id] ?? extCfg[id]?.def\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t} else if (mainValOnlyForSimpleVal) {\r\n\t\tres = value;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const encodeStepParamAdvancedVal = (value, paramName, stepDefs) => {\r\n\tconst extCfg = stepDefs?.[paramName]?.ext;\r\n\treturn extCfg ? 'base64__' + btoa(JSON.stringify(value)) : value;\r\n};\r\n\r\nexport const initStepParams = (stepDefinitions) => {\r\n\tconst res = {};\r\n\tObject.keys(stepDefinitions).forEach(paramName => {\r\n\t\tlet mainVal = '';\r\n\t\tif (stepDefinitions[paramName]) {\r\n\t\t\tmainVal = stepDefinitions[paramName].def || '';\r\n\t\t\tif (stepDefinitions[paramName].ext) {\r\n\t\t\t\tlet extVals = {};\r\n\t\t\t\tObject.keys(stepDefinitions[paramName].ext).forEach(extName => {\r\n\t\t\t\t\textVals[extName] = stepDefinitions[paramName].ext[extName].def;\r\n\t\t\t\t});\r\n\t\t\t\tmainVal = {\r\n\t\t\t\t\tval: mainVal,\r\n\t\t\t\t\text: extVals\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\tres[paramName] = mainVal;\r\n\t});\r\n\treturn res;\r\n};\r\n\r\nexport const getNthStr = (idx, supEnabled = true) => {\r\n\tif (idx !== false && !isNaN(idx)) {\r\n\t\tlet supStart = '';\r\n\t\tlet supEnd = '';\r\n\t\tif (supEnabled) {\r\n\t\t\tsupStart = '<span class=\"dpit-sup\">';\r\n\t\t\tsupEnd = '</span>';\r\n\t\t}\r\n\t\tlet res = '';\r\n\t\tswitch (idx) {\r\n\t\t\tcase 1: res = `1${supStart}st${supEnd}`; break;\r\n\t\t\tcase 2: res = `2${supStart}nd${supEnd}`; break;\r\n\t\t\tcase 3: res = `3${supStart}rd${supEnd}`; break;\r\n\t\t\tdefault: res = `${idx}${supStart}th${supEnd}`; break;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\treturn '';\r\n};\r\n\r\n\r\nexport const getCssVar = (variableName, def = null, element = document.documentElement) => {\r\n\tlet res = def;\r\n\tif (element && variableName) {\r\n\t\tconst tmp = getComputedStyle(element).getPropertyValue(variableName);\r\n\t\tif (tmp !== null && tmp !== undefined && tmp !== '') {\r\n\t\t\tres = tmp;\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const updateCssVar = (name, value, element = document.documentElement) => {\r\n\telement.style.setProperty(name, value);\r\n};\r\n\r\nexport const textStylesIsHOrPOption = ($key) => {\r\n\treturn $key.length >= 3 && ($key[0] === 'p' && $key[1] === '_' || $key[0] === 'h' && $key[2] === '_');\r\n};\r\n\r\nexport const textStylesIsFontFamilyVal = ($key) => {\r\n\treturn ['p_font', 'h_font', 'btn_font'].includes($key);\r\n};\r\n\r\nexport const setMobileSizeCoef = (textStylesCfg, winBB = null, mobileBreakPoint = -1, element = document.documentElement) => {\r\n\tif (textStylesCfg) {\r\n\t\tconst mobSizeCoef = (mobileBreakPoint > 0 && winBB && winBB.width <= mobileBreakPoint) ? textStylesCfg.mobile_size_coef / 100 : 1;\r\n\t\tupdateCssVar('--font-size-coef', mobSizeCoef * textStylesCfg.all_in_1_size_coef / 100, element);\r\n\t}\r\n};\r\n\r\nexport const round1dec = (number) => {\r\n\treturn Math.round(number * 10) / 10;\r\n};\r\n\r\nexport const floor1dec = (number) => {\r\n\treturn Math.floor(number * 10) / 10;\r\n};\r\n\r\nexport const ceil1dec = (number) => {\r\n\treturn Math.ceil(number * 10) / 10;\r\n};\r\n\r\nexport const round3dec = (number) => {\r\n\treturn Math.round(number * 1000) / 1000;\r\n};\r\n\r\nexport const round6dec = (number) => {\r\n\treturn Math.round(number * 1000000) / 1000000;\r\n};\r\n\r\nexport const setTextStyles = (textStylesCfg, winBB = null, mobileBreakPoint = -1, element = document.documentElement) => {\r\n\r\n\tif (textStylesCfg && element) {\r\n\t\tsetMobileSizeCoef(textStylesCfg, winBB, mobileBreakPoint, element);\r\n\t\tconst text_styles = { ...textStylesCfg };\r\n\t\tconst font_size_unit = text_styles.font_size_unit ?? 'em';\r\n\t\tconst cssVariables = [];\r\n\r\n\t\tObject.keys(text_styles).forEach(propName => {\r\n\t\t\tif (textStylesIsFontFamilyVal(propName)) {\r\n\t\t\t\tcssVariables[`--${propName}`] = (text_styles[propName] || text_styles[propName] == '0') ? text_styles[propName] : 'inherit';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (text_styles.p_font_size || text_styles.p_font_size === '0') {\r\n\t\t\tcssVariables['--p_font_size'] = 'calc(' + text_styles.p_font_size + font_size_unit + '*var(--font-size-coef))';\r\n\t\t\tif (text_styles.p_mb || text_styles.p_mb === '0') {\r\n\t\t\t\tcssVariables['--p_mb'] = 'calc(' + round3dec(text_styles.p_mb / 100) + '*' + cssVariables['--p_font_size'] + ')';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (text_styles.h2_font_size || text_styles.h2_font_size == 0 && text_styles.h5_font_size || text_styles.h5_font_size == 0) {\r\n\t\t\tconst unit = (text_styles.h2_font_size - text_styles.h5_font_size) / 4;\r\n\t\t\tfor (let i = 1; i <= 6; i++) {\r\n\t\t\t\tconst unitCnt = i - 2;\r\n\t\t\t\tcssVariables[`--h${i}_font_size`] = 'calc(' + round3dec(text_styles.h2_font_size - unitCnt * unit) + font_size_unit + '*var(--font-size-coef))';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (text_styles.h2_mb || text_styles.h2_mb == 0 && text_styles.h5_mb || text_styles.h5_mb == 0) {\r\n\t\t\tconst unit = (text_styles.h2_mb - text_styles.h5_mb) / 4;\r\n\t\t\tfor (let i = 1; i <= 6; i++) {\r\n\t\t\t\tconst unitCnt = i - 2;\r\n\t\t\t\tconst percentVal = round3dec(text_styles.h2_mb - unitCnt * unit);\r\n\t\t\t\tcssVariables[`--h${i}_mb`] = 'calc(' + round3dec(percentVal / 100) + '*' + cssVariables[`--h${i}_font_size`] + ')';\r\n\t\t\t\tif (i === 2) {\r\n\t\t\t\t\tcssVariables['--dpit-unit'] = 'calc(' + round3dec(percentVal * 1.3 /*line height*/ / 1000 /* smaller unit */) + '*' + cssVariables[`--h${i}_font_size`] + ')';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tObject.keys(cssVariables).forEach(propName => {\r\n\t\t\tupdateCssVar(propName, cssVariables[propName], element);\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const asyncWait = (timeoutMs = 10) => {\r\n\treturn new Promise(resolve => {\r\n\t\tsetTimeout(() => resolve(true), timeoutMs);\r\n\t});\r\n};\r\n\r\n\r\nexport const loadBuilder = (mainCfg, instanceCreatorFce) => {\r\n\tif (mainCfg.dpDebugEn) console.log('[dpit] INIT Builder config:', mainCfg);\r\n\tconst currentUrl = new URL(window.location);\r\n\tconst queryParamsDefs = mainCfg.queryParamsDefs;\r\n\tconst tourId = getDpUrlParam('dp_qp_tour_id', queryParamsDefs, currentUrl);\r\n\tconst createNew = getDpUrlParam('dp_qpb_create_new', queryParamsDefs, currentUrl);\r\n\tconst builderMode = getDpUrlParam('dp_qpb_builder_mode', queryParamsDefs, currentUrl);\r\n\tif ((mainCfg.tours && mainCfg.tours.length) || builderMode === TargetType.MOBILE_MENU) {\r\n\t\tconst mainCfgProcessed = { ...mainCfg };\r\n\t\tdelete mainCfgProcessed.tours;\r\n\t\tmainCfgProcessed.builderOrigin = getDpUrlParam('dp_qpb_builder_origin', queryParamsDefs, currentUrl);\r\n\t\tmainCfgProcessed.builderMode = builderMode;\r\n\t\tmainCfgProcessed.originHashId = getDpUrlParam('dp_qpb_origin_el_id', queryParamsDefs, currentUrl);\r\n\t\tmainCfgProcessed.triggerId = getDpUrlParam('dp_qp_trigger_id', queryParamsDefs, currentUrl) || 0;\r\n\t\tmainCfgProcessed.initState = getDpUrlParam('dp_qpb_init_state', queryParamsDefs, currentUrl);\r\n\t\tmainCfgProcessed.inNewWindow = getDpUrlParam('dp_qpb_in_new_window', queryParamsDefs, currentUrl) === '1';\r\n\t\tmainCfgProcessed.mobileAltStepMode = getDpUrlParam('dp_qpb_mobile_alt_step_mode', queryParamsDefs, currentUrl);\r\n\t\tconst delay = mainCfgProcessed.mobileAltStepMode === RESPONSIVE_MODE.mobileMenu ? 500 : 0;\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (builderMode === TargetType.MOBILE_MENU) {\r\n\t\t\t\tinstanceCreatorFce(mainCfgProcessed, null);\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmainCfg.tours.forEach((tourCfg) => {\r\n\t\t\t\t\tif ((createNew && tourCfg.createNew) || tourCfg.tourId == tourId) {\r\n\t\t\t\t\t\tif (tourCfg && tourCfg.properties) tourCfg.properties.disableStartAnimation = builderMode !== TargetType.STEP;\r\n\t\t\t\t\t\tinstanceCreatorFce(mainCfgProcessed, tourCfg);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, delay);\r\n\t}\r\n};\r\n\r\nexport const getAdminBarHeight = () => $('#wpadminbar').outerHeight() || 0;\r\n\r\n\r\n/**\r\n * Scroll element into view\r\n * @param {Element} element element to scroll into view\r\n * @param {options} object scrollIntoView options see https://github.com/KoryNunn/scroll-into-view\r\n * @returns {Promise}\r\n */\r\nexport const scrollIntoView = (element, options = { align: { top: 0.5, left: 0.5 }, cancellable: true }) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tscrollIntoViewCore(element, options, resolve);\r\n\t});\r\n};\r\n\r\n\r\n/**\r\n * Insert animation and highlight class to the element\r\n * @param {Element} element\r\n * @param {string} animationClass\r\n * @param {options} options scrollIntoView options see https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\r\n * @param {boolean} addHighlightClass\r\n * @param {string} removeHighlightClickChildSelector\r\n * @param {string} highlightClass\r\n */\r\nexport const scrollToElementAndAnimate = async (\r\n\telement,\r\n\tanimationClass = 'dpit-admin-pulse-anim',\r\n\tanimTimeMs = 1000,\r\n\toptions = { align: { top: 0.5, left: 0.5 } },\r\n\taddHighlightClass = false,\r\n\tremoveHighlightClickChildSelector = '',\r\n\thighlightClass = 'dpit-admin-err-highlight'\r\n) => {\r\n\tif (element) {\r\n\t\tawait scrollIntoView(element, options);\r\n\t\treturn await animateElement(element, animationClass, animTimeMs, addHighlightClass, removeHighlightClickChildSelector, highlightClass);\r\n\t}\r\n};\r\n\r\n/**\r\n * Insert animation and highlight class to the element\r\n * @param {Element} element\r\n * @param {string} animationClass\r\n * @param {boolean} addHighlightClass\r\n * @param {string} removeHighlightClickChildSelector\r\n * @param {string} highlightClass\r\n */\r\nexport const animateElement = async (element, animationClass = 'dpit-admin-pulse-anim', animTime = 1000, addHighlightClass = false, removeHighlightClickChildSelector = '', highlightClass = 'dpit-admin-err-highlight') => {\r\n\tfunction removeHighlightClass() {\r\n\t\telement.classList.remove(highlightClass);\r\n\t\tconst $removeHighlightClickTargetEl = $(removeHighlightClickChildSelector);\r\n\t\tif ($removeHighlightClickTargetEl) {\r\n\t\t\t$removeHighlightClickTargetEl.off('click', removeHighlightClass);\r\n\t\t}\r\n\t}\r\n\tif (addHighlightClass && highlightClass && !element.classList.contains(highlightClass)) {\r\n\t\telement.classList.add(highlightClass);\r\n\r\n\t\tif (removeHighlightClickChildSelector) {\r\n\t\t\tconst $removeHighlightClickTargetEl = $(removeHighlightClickChildSelector);\r\n\t\t\tif ($removeHighlightClickTargetEl) {\r\n\t\t\t\t$removeHighlightClickTargetEl.on('click', removeHighlightClass);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (animationClass) {\r\n\t\telement.classList.add(animationClass);\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\telement.classList.remove(animationClass);\r\n\t\t\t\tresolve();\r\n\t\t\t}, animTime);\r\n\t\t});\r\n\t} else {\r\n\t\treturn Promise.resolve();\r\n\t}\r\n};\r\n\r\n/**\r\n  * @param {HTMLElement|Node} element\r\n * @param {String} containerClassName\r\n * @param {String} containerId\r\n * @param {HTMLElement|Node} appendFooterEl\r\n * @return {HTMLElement|Node} returns container element\r\n */\r\nexport const wrapElementByContainer = (element, containerClassName = '', containerId = '', appendFooterEl = null) => {\r\n\tlet containerEl = document.createElement('div');\r\n\tcontainerEl.className = containerClassName;\r\n\tcontainerEl.id = containerId;\r\n\tcontainerEl.appendChild(element);\r\n\tif (appendFooterEl) {\r\n\t\tcontainerEl.appendChild(appendFooterEl);\r\n\t}\r\n\treturn containerEl;\r\n};\r\n\r\nexport const deleteCookie = (name) => {\r\n\tdocument.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n};\r\n\r\nexport const setCookie = (name, value, expiresSeconds) => {\r\n\tconst d = new Date();\r\n\td.setTime(d.getTime() + (expiresSeconds * 1000));\r\n\tlet expires = 'expires=' + d.toUTCString();\r\n\tdocument.cookie = name + '=' + value + ';' + expires + ';path=/';\r\n};\r\n\r\nexport const getCookie = (name) => {\r\n\tconst cookies = Object.fromEntries(document.cookie.split('; ').map(v => v.split(/=(.*)/s).map(decodeURIComponent)));\r\n\treturn cookies ? cookies[name] : '';\r\n};\r\n\r\nexport const getCookieAndDelete = function (name) {\r\n\tconst value = getCookie(name);\r\n\tdeleteCookie(name);\r\n\treturn value;\r\n};\r\n\r\n\r\n/**\r\n * @param {Element} element\r\n */\r\nexport const isElementVisible = (element) => {\r\n\tif (!element) return false;\r\n\tconst style = getComputedStyle(element);\r\n\treturn style.getPropertyValue('display') !== 'none'\r\n\t\t&& style.getPropertyValue('visibility') !== 'hidden'\r\n\t\t&& style.getPropertyValue('opacity') !== '0';\r\n};\r\n\r\n/**\r\n * @param {Element} element\r\n */\r\nexport const isElementVisibleParentInc = (element) => {\r\n\tif (!element) return false;\r\n\tlet parentElm = element;\r\n\twhile (parentElm != null) {\r\n\t\tif (!parentElm.tagName || parentElm.tagName.toLowerCase() === 'body') break;\r\n\t\tif (!isElementVisible(parentElm)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tparentElm = parentElm.parentNode;\r\n\t}\r\n\treturn true;\r\n};\r\n\r\n\r\n/**\r\n * Remove an entry from a string array if it's there, does nothing if it isn't there.\r\n *\r\n * @param {Array} stringArray\r\n * @param {String} stringToRemove\r\n */\r\nexport const removeEntry = (stringArray, stringToRemove) => {\r\n\tif (stringArray.indexOf(stringToRemove) > -1) {\r\n\t\tstringArray.splice(stringArray.indexOf(stringToRemove), 1);\r\n\t}\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/ /* global define */(function(){'use strict';var hasOwn={}.hasOwnProperty;var nativeCodeString='[native code]';function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==='string'||argType==='number'){classes.push(arg);}else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner);}}}else if(argType==='object'){if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes('[native code]')){classes.push(arg.toString());continue;}for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key);}}}}return classes.join(' ');}if(typeof module!=='undefined'&&module.exports){classNames.default=classNames;module.exports=classNames;}else if(typeof define==='function'&&typeof define.amd==='object'&&define.amd){// register as 'classnames', consistent with npm package name\ndefine('classnames',[],function(){return classNames;});}else{window.classNames=classNames;}})();","export default class DpitColor {\r\n\tconstructor(src) {\r\n\r\n\t\tif (src == null) { // eslint-disable-line no-eq-null,eqeqeq\r\n\t\t\tthis.rgbObj = {\r\n\t\t\t\tr: 0,\r\n\t\t\t\tg: 0,\r\n\t\t\t\tb: 0\r\n\t\t\t};\r\n\t\t} else if (src instanceof DpitColor) {\r\n\t\t\tthis.rgbObj = { ...src.rgbObj };\r\n\t\t} else if (typeof src === 'string') {\r\n\t\t\tif (src.startsWith('#')) {\r\n\t\t\t\tthis.rgbObj = DpitColor.hexStringToRgbObj(src);\r\n\t\t\t} else {\r\n\t\t\t\tthis.rgbObj = DpitColor.rgbStringToRgbObj(src);\r\n\t\t\t\tif (!this.rgbObj) {\r\n\t\t\t\t\tthrow new Error('Argument \"src\" isn\\'t valid');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (src) {\r\n\t\t\tthis.rgbObj = { ...src };\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getRgbStringCommaSeparated(colorDefinition) {\r\n\t\tif (colorDefinition) {\r\n\t\t\ttry {\r\n\t\t\t\tconst colorObj = new DpitColor(colorDefinition);\r\n\t\t\t\treturn colorObj.toRgbStringCommaSeparated();\r\n\t\t\t}\r\n\t\t\tcatch {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic fromRgb(r, g, b) {\r\n\t\treturn new DpitColor({ r, g, b });\r\n\t}\r\n\r\n\tstatic rgbStringToRgbObj(rgbString) {\r\n\t\tconst regex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/;\r\n\t\tconst match = rgbString.match(regex);\r\n\t\tif (match) {\r\n\t\t\tconst r = parseInt(match[1], 10);\r\n\t\t\tconst g = parseInt(match[2], 10);\r\n\t\t\tconst b = parseInt(match[3], 10);\r\n\t\t\treturn { r, g, b };\r\n\t\t}\r\n\t\treturn null; // Invalid RGB string format\r\n\t}\r\n\r\n\tstatic hexStringToRgbObj(hex) {\r\n\t\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n\t\thex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n\t\t\treturn r + r + g + g + b + b;\r\n\t\t});\r\n\r\n\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\treturn result ? {\r\n\t\t\tr: parseInt(result[1], 16),\r\n\t\t\tg: parseInt(result[2], 16),\r\n\t\t\tb: parseInt(result[3], 16)\r\n\t\t} : null;\r\n\t}\r\n\r\n\tcontrast(color2) {\r\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\r\n\t\tvar lum1 = this.luminosity();\r\n\t\tvar lum2 = color2.luminosity();\r\n\r\n\t\tif (lum1 > lum2) {\r\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\r\n\t\t}\r\n\r\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\r\n\t}\r\n\r\n\tluminosity() {\r\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\r\n\t\tvar lum = {};\r\n\t\tObject.keys(this.rgbObj).forEach(key => {\r\n\t\t\tvar chan = this.rgbObj[key] / 255;\r\n\t\t\tlum[key] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\r\n\t\t});\r\n\t\treturn 0.2126 * lum.r + 0.7152 * lum.g + 0.0722 * lum.b;\r\n\t}\r\n\r\n\tred() { return this.rgbObj.r; }\r\n\tgreen() { return this.rgbObj.g; }\r\n\tblue() { return this.rgbObj.b; }\r\n\tisDark() {\r\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\r\n\t\tvar yiq = (this.rgbObj.r * 299 + this.rgbObj.g * 587 + this.rgbObj.b * 114) / 1000;\r\n\t\treturn yiq < 128;\r\n\t}\r\n\r\n\tisLight() {\r\n\t\treturn !this.isDark();\r\n\t}\r\n\r\n\tmix(colorToMixIn, weight) {\r\n\r\n\t\tif (!(colorToMixIn instanceof DpitColor) || !colorToMixIn.rgbObj) {\r\n\t\t\tthrow new Error('Argument \"mixinColor\" isn\\'t a DpitColor instance, but rather an instance of ' + typeof colorToMixIn);\r\n\t\t}\r\n\t\tvar color1 = colorToMixIn;\r\n\t\tvar color2 = this;\r\n\t\tvar p = weight === undefined ? 0.5 : weight;\r\n\r\n\t\tvar w = 2 * p - 1;\r\n\t\tvar w1 = (w + 1) / 2.0;\r\n\t\tvar w2 = 1 - w1;\r\n\r\n\t\treturn DpitColor.fromRgb(\r\n\t\t\tMath.max(Math.min(255, Math.round(w1 * color1.red() + w2 * color2.red())), 1),\r\n\t\t\tMath.max(Math.min(255, Math.round(w1 * color1.green() + w2 * color2.green())), 1),\r\n\t\t\tMath.max(Math.min(255, Math.round(w1 * color1.blue() + w2 * color2.blue())), 1)\r\n\t\t);\r\n\t}\r\n\r\n\ttoRgbStringCommaSeparated() {\r\n\t\treturn `${this.red()}, ${this.green()}, ${this.blue()}`;\r\n\t}\r\n\r\n\tsetAsCssVariable(varName, element = document.documentElement) {\r\n\t\telement.style.setProperty(varName, this.toRgbStringCommaSeparated());\r\n\t}\r\n\r\n}\r\n","(function(name,context,definition){if(typeof module!=='undefined'&&module.exports)module.exports=definition();else if(typeof define==='function'&&define.amd)define(definition);else context[name]=definition();})('urljoin',this,function(){function normalize(strArray){var resultArray=[];if(strArray.length===0){return'';}if(typeof strArray[0]!=='string'){throw new TypeError('Url must be a string. Received '+strArray[0]);}// If the first part is a plain protocol, we combine it with the next part.\nif(strArray[0].match(/^[^/:]+:\\/*$/)&&strArray.length>1){var first=strArray.shift();strArray[0]=first+strArray[0];}// There must be two or three slashes in the file protocol, two slashes in anything else.\nif(strArray[0].match(/^file:\\/\\/\\//)){strArray[0]=strArray[0].replace(/^([^/:]+):\\/*/,'$1:///');}else{strArray[0]=strArray[0].replace(/^([^/:]+):\\/*/,'$1://');}for(var i=0;i<strArray.length;i++){var component=strArray[i];if(typeof component!=='string'){throw new TypeError('Url must be a string. Received '+component);}if(component===''){continue;}if(i>0){// Removing the starting slashes for each component but the first.\ncomponent=component.replace(/^[\\/]+/,'');}if(i<strArray.length-1){// Removing the ending slashes for each component but the last.\ncomponent=component.replace(/[\\/]+$/,'');}else{// For the last component we will combine multiple slashes to a single one.\ncomponent=component.replace(/[\\/]+$/,'/');}resultArray.push(component);}var str=resultArray.join('/');// Each input component is now separated by a single slash except the possible first plain protocol part.\n// remove trailing slash before parameters or hash\nstr=str.replace(/\\/(\\?|&|#[^!])/g,'$1');// replace ? in parameters with &\nvar parts=str.split('?');str=parts.shift()+(parts.length>0?'?':'')+parts.join('&');return str;}return function(){var input;if(typeof arguments[0]==='object'){input=arguments[0];}else{input=[].slice.call(arguments);}return normalize(input);};});"],"sourceRoot":""}