{"version":3,"sources":["webpack:///./node_modules/classnames/index.js","webpack:///./public/assets/js/modules/core/DpitCoreSticky.js","webpack:///./public/assets/js/modules/core/DpitBuilderCoreSticky.js"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","includes","key","call","join","module","exports","default","DpitCoreSticky","DpitCore","constructor","wrapEl","mainCfg","tourCfg","super","hideElement","this","arrowEl","document","documentElement","classList","add","CLASSES_CORE","isStickyTheme","printDebugMessage","console","log","VERSION","fireAfterStepChangeEvent","backward","isOnTop","isStickyThemeOnTop","doAction","EVENTS","afterStepChange","currentStepObj","stepObject4Hooks","stepItem","filterWinBoardMargin","margin","stickyTooltipOffset","getWinBoardOffset","top","bottom","determineTooltipPosition","maxBoardBB","isFixedPos","winBB","docBB","tooltipDist","targetBB","tooltipBB","height","basePos","isDummyMode","base","placeTooltipInSoftRefresh","placeTooltip","fixPositionOutOfTheWindowForNotFixedElements","tooltipTextEl","style","maxHeight","fixPositionOutOfTheBoard","actualizeTooltipBB","diff","tooltipTextHeight","$","actualizeFlier","placeTooltipCore","_","useLastPosition","_this$tooltipPos","tooltipPos","tooltipEl","concat","tooltip","fixPositionOutOfTheWindow","actualizeBoardSizes","debugVisualizer","visualizeBoards","docBoardBB","winBoardBB","desiredNumberPos","x","y","getReverseBasePos","onTooltip","isNeededNextIteration","getNumberIntersectionFeature","possiblePositionsLT","posX","posY","bbContainerToTest","getNumberDestElSizeFeature","numberLayerHalfSize","getPlaceNumberRepetitionParams","oldDesiredPosition","enableIndentation","desiredPosition","maxIterations","isNumberCloseToTooltip","getIsPossibleNumberPositionsInBoardObject","maxAreaBB","left","numberBB","width","right","getScrollFlierOptions","scrollTimeMs","undefined","res","align","lockX","isElementScrollableX","time","flierBB","topOffset","_this$tooltipPos2","areBulletsFixed","bulletsLayer","hasCssProperty","getComputedStyle","bulletsHeight","getBoundingClientRect","bulletsBottom","getCssValFloat","isProgressBarEnabled","stepItems","_this$tooltipPos3","getFlierBB","DpitBB","intersect","merge","actualizeTooltipMinWidth","actualizeStickyTooltipHeight","actualizeTheme","theme","accentColor","actualizeProgressBar","actualizeTooltipMaxWidth","maxWidth","buttonPrevNextWrapEl","remove","buttonPrevNextWrap","MODIFIERS","vert","actualizeButtonsTextVisibility","buttonsPrevNextWrapHeight","tooltipElHeight","offsetHeight","loadCancelButtonIcons","unplugTheme","showElement","LAYER_CLASSES_BUILDER","builderMode","builderInRun","builder","stepEditMode","targetSelectingMode","hovered","DpitBuilderCore","_this","dpDebugEn","_defineProperty","stepIdx","currentUrl","removeURLParameters","window","location","href","queryParamsDefs","currentUrlRel","absToRelativeUrl","siteUrl","newStepBasic","initStepParams","stepDefinitions","isNewStep","idx","step","url","unifyUrl","newStep","selector","element","updateIndexOfStepItem","options","showBullets","find","append","createBullet","onNavigBulletClick","bind","splice","stepItemBase","isAtEnd","newStepIdx","optionsOverride","exitOnOverlayClick","exitOnEsc","leaveOverlayAlways","DpitHooks","init","addAction","onInit","buttonPrevEl","hover","onButtonHover","id","hoverIn","buttonNextEl","setAsEditMode","isEditMode","startByFirstStepItem","firstStepItem","hideIntroLayers","actualizeCurrentStep","startCoreBasic","startCore","isBackward","startStep","TargetType","TRIGGER","showBackgroundOverlay","initSteps","isAnyStepItem","onNoStepsInit","setInRunClasses","clearInRunClasses","shouldBeStepSkipped","isTargetInMobileMenu","STEP","mobileAltStepMode","mainElement","dpIntroBuilderContainer","createElement","className","appendChild","pauseTour","addDocumentClass","hideShadowOverlay","hideBackgroundOverlay","restoreTour","removeDocumentClass","reason","REFRESH_REASONS","restore","showIntroLayersDisabled","showShadowOverlay","actualizeThemeSpecifier","getOnBeforeUnloadByLinkClickConfirmMessage","i18n","actualizeNavigButtonHoverState","isNextButton","isHovered","showIntroLayers","showWrapper","setOptions","onSkipButtonClick","alert","tour_ending_in_builder","actualizeEditPanelEl","editPanelEl","querySelector","editPanelBB","fromElement","isStickyEditPanel","isStickyEditPanelOpened","_this$editPanelEl","contains","forceScrollTopOffset","builderEditPanelBB","defaultBoardMarginPx","defaultWinBoardMarginMobSizeCoef","filterTooltipElRelPos","elRelPos","freeHeight"],"mappings":"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","file":"main/DpitBuilderCoreSticky-5ae39f32.js","sourcesContent":["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/ /* global define */(function(){'use strict';var hasOwn={}.hasOwnProperty;var nativeCodeString='[native code]';function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==='string'||argType==='number'){classes.push(arg);}else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner);}}}else if(argType==='object'){if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes('[native code]')){classes.push(arg.toString());continue;}for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key);}}}}return classes.join(' ');}if(typeof module!=='undefined'&&module.exports){classNames.default=classNames;module.exports=classNames;}else if(typeof define==='function'&&typeof define.amd==='object'&&define.amd){// register as 'classnames', consistent with npm package name\ndefine('classnames',[],function(){return classNames;});}else{window.classNames=classNames;}})();","import { CLASSES_CORE, MODIFIERS, VERSION, EVENTS } from './constants';\r\nimport DpitCore from './DpitCore';\r\nimport {\r\n\tgetCssValFloat, getReverseBasePos, hasCssProperty, isElementScrollableX,\r\n} from '../../modules/dpitUtilsPublic';\r\nimport DpitBB from './DpitBB';\r\nimport {\r\n\thideElement,\r\n\tshowElement\r\n} from '../../../../../includes/assets/js/modules/dpitHidden';\r\n\r\n\r\nexport default class DpitCoreSticky extends DpitCore {\r\n\tconstructor(wrapEl, mainCfg, tourCfg) {\r\n\t\tsuper(wrapEl, mainCfg, tourCfg);\r\n\t\thideElement(this.arrowEl);\r\n\t\tdocument.documentElement.classList.add(CLASSES_CORE.isStickyTheme);\r\n\t}\r\n\r\n\tprintDebugMessage() {\r\n\t\tconsole.log('[dpit] INIT DpitCoreSticky: v' + VERSION + ' | Sticky engine loaded');\r\n\t}\r\n\r\n\tfireAfterStepChangeEvent(backward) {\r\n\t\tconst isStickyTheme = this.isStickyTheme();\r\n\t\tconst isOnTop = isStickyTheme ? this.isStickyThemeOnTop() : false;\r\n\t\tthis.doAction(EVENTS.afterStepChange, {\r\n\t\t\tisStickyTheme: isStickyTheme,\r\n\t\t\tisStickyThemeOnTop: isOnTop && isStickyTheme,\r\n\t\t\tbackward: backward,\r\n\t\t\tcurrentStepObj: this.stepObject4Hooks(this.stepItem)\r\n\t\t});\r\n\t}\r\n\r\n\tfilterWinBoardMargin(margin) {\r\n\t\tconst stickyTooltipOffset = this.getWinBoardOffset();\r\n\t\tmargin.top += stickyTooltipOffset.top;\r\n\t\tmargin.bottom += stickyTooltipOffset.bottom;\r\n\t\treturn margin;\r\n\t}\r\n\r\n\tdetermineTooltipPosition() {\r\n\r\n\t\tconst maxBoardBB = this.isFixedPos ? this.winBB : this.docBB;\r\n\t\tconst tooltipDist = {\r\n\t\t\ttop: (this.targetBB.top) - (maxBoardBB.top + this.tooltipBB.height),\r\n\t\t\tbottom: (maxBoardBB.bottom - this.tooltipBB.height) - (this.targetBB.top + this.targetBB.height)\r\n\t\t};\r\n\r\n\t\tlet basePos = tooltipDist.bottom > tooltipDist.top || this.isDummyMode() ? 'bottom' : 'top';\r\n\t\tif (tooltipDist.bottom > 0 && tooltipDist.top > 0) {\r\n\t\t\tbasePos = 'bottom';\r\n\t\t\t// if both are possible choose last\r\n\t\t\t//basePos = this.tooltipPos.base;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tbase: basePos\r\n\t\t};\r\n\t}\r\n\r\n\tplaceTooltipInSoftRefresh() {\r\n\t\tthis.placeTooltip(false, true);\r\n\t}\r\n\r\n\r\n\tfixPositionOutOfTheWindowForNotFixedElements() {\r\n\t\tthis.tooltipTextEl.style.maxHeight = '';\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfixPositionOutOfTheBoard() {\r\n\t\tthis.tooltipTextEl.style.maxHeight = '';\r\n\t\tthis.actualizeTooltipBB();\r\n\t\tif (this.isDummyMode()) {\r\n\t\t\tconst diff = this.tooltipBB.height - this.winBB.height;\r\n\t\t\tif (diff > 0) {\r\n\t\t\t\t//this.tooltipEl.style.maxHeight = this.winBB.height + 'px';\r\n\t\t\t\tlet tooltipTextHeight = $(this.tooltipTextEl).height();\r\n\t\t\t\tthis.tooltipTextEl.style.maxHeight = (tooltipTextHeight - diff) + 'px';\r\n\t\t\t\t//$(this.tooltipTextEl).height(tooltipTextHeight - diff);\r\n\t\t\t\tthis.actualizeTooltipBB();\r\n\t\t\t\tthis.actualizeFlier(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\t/*fixOverWinBoardTopForFixedElements(containerBB) {\r\n\t\t//(this.targetBB.top - tooltipSizesArrowInc.height) - containerBB.top\r\n\t\t//console.log('fix over TOP (tooltip on TOP)');\r\n\t\tconst topBkp = $(this.tooltipEl).offset().top;\r\n\t\tlet tooltipTextHeight = $(this.tooltipTextEl).height();\r\n\t\t//const textLayerMaxHeight = Math.floor(Math.max(tooltipTextHeight - (containerBB.top + 1 - this.tooltipBB.top)));\r\n\t\tconst textLayerMaxHeight = Math.floor(Math.max(tooltipTextHeight - (containerBB.top + 1 - this.tooltipBB.top), SIZE_LIMITS_PX.minTooltipContentHeightFixedPos));\r\n\t\tthis.tooltipTextEl.style.height = textLayerMaxHeight + 'px';\r\n\r\n\t\t$(this.tooltipEl).offset({ top: $(this.tooltipEl).offset().top + tooltipTextHeight - textLayerMaxHeight });\r\n\t\tthis.actualizeTooltipBB();\r\n\t\tlet isOverTop = this.tooltipBB.top < containerBB.top;\r\n\t\tif (isOverTop) {\r\n\t\t\t/*$(this.tooltipEl).offset({ top: topBkp });\r\n\t\t\tthis.tooltipTextEl.style.height = '';\r\n\t\t\tthis.actualizeTooltipBB();\r\n\t\t\tisOverTop = this.tooltipBB.top < containerBB.top;*/\r\n\t/*}\r\n\t\treturn isOverTop;\r\n\t}*/\r\n\r\n\tplaceTooltipCore(_, useLastPosition) {\r\n\t\tif (!(useLastPosition && this.tooltipPos)) {\r\n\t\t\tthis.tooltipPos = this.determineTooltipPosition(this.stepItem);\r\n\t\t}\r\n\t\tthis.tooltipEl.classList.add(`${CLASSES_CORE.tooltip}--${this.tooltipPos?.base}`);\r\n\t\tthis.fixPositionOutOfTheWindow();\r\n\t\tthis.actualizeBoardSizes();\r\n\t\tif (this.debugVisualizer) this.debugVisualizer.visualizeBoards(this.docBoardBB, this.winBoardBB, this.docBB, this.winBB);\r\n\t\treturn {\r\n\t\t\tdesiredNumberPos: {\r\n\t\t\t\tx: 'right',\r\n\t\t\t\ty: getReverseBasePos(this.tooltipPos.base),\r\n\t\t\t\tonTooltip: false\r\n\t\t\t},\r\n\t\t\tisNeededNextIteration: false\r\n\t\t};\r\n\t}\r\n\r\n\tgetNumberIntersectionFeature(possiblePositionsLT, posX, posY, bbContainerToTest) {\r\n\t\tif (bbContainerToTest === this.tooltipBB) return 0;\r\n\t\telse return super.getNumberIntersectionFeature(possiblePositionsLT, posX, posY, bbContainerToTest);\r\n\t}\r\n\r\n\tgetNumberDestElSizeFeature(numberLayerHalfSize, bbContainerToTest) {\r\n\t\tif (bbContainerToTest === this.tooltipBB) return { x: 0, y: 0 };\r\n\t\telse return super.getNumberDestElSizeFeature(numberLayerHalfSize, bbContainerToTest);\r\n\t}\r\n\r\n\tgetPlaceNumberRepetitionParams(oldDesiredPosition) {\r\n\r\n\t\treturn {\r\n\t\t\tenableIndentation: true,\r\n\t\t\tdesiredPosition: { ...oldDesiredPosition, onTooltip: false },\r\n\t\t\tmaxIterations: 1\r\n\t\t};\r\n\t}\r\n\r\n\tisNumberCloseToTooltip() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tgetIsPossibleNumberPositionsInBoardObject(possiblePositionsLT) {\r\n\t\tconst maxAreaBB = this.isFixedPos ? this.winBB : this.docBB;\r\n\t\treturn {\r\n\t\t\tleft: possiblePositionsLT.left >= maxAreaBB.left && possiblePositionsLT.left + this.numberBB.width <= maxAreaBB.right,\r\n\t\t\ttop: possiblePositionsLT.top >= maxAreaBB.top && possiblePositionsLT.top + this.numberBB.height <= maxAreaBB.bottom,\r\n\t\t\tright: possiblePositionsLT.right >= maxAreaBB.left && possiblePositionsLT.right + this.numberBB.width <= maxAreaBB.right,\r\n\t\t\tbottom: possiblePositionsLT.bottom >= maxAreaBB.top && possiblePositionsLT.bottom + this.numberBB.height <= maxAreaBB.bottom,\r\n\t\t};\r\n\t}\r\n\r\n\tgetScrollFlierOptions(scrollTimeMs = 500) {\r\n\r\n\t\tconst res = {\r\n\t\t\talign: {\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0.5,\r\n\t\t\t\tlockX: !isElementScrollableX(document.documentElement)\r\n\t\t\t},\r\n\t\t\ttime: scrollTimeMs\r\n\t\t};\r\n\t\tif (this.flierBB) {\r\n\t\t\tif (this.flierBB.height > this.winBoardBB.height) {\r\n\t\t\t\tswitch (this.tooltipPos.base) {\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\tres.align.topOffset = this.winBoardBB.top;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tres.align.topOffset = this.winBoardBB.top + (this.winBoardBB.height - this.flierBB.height) / 2;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tgetWinBoardOffset() {\r\n\t\tif (this.tooltipEl) {\r\n\t\t\tconst areBulletsFixed = this.bulletsLayer && hasCssProperty(getComputedStyle(this.bulletsLayer), 'position', ['fixed']);\r\n\t\t\tlet bulletsHeight = areBulletsFixed ? this.bulletsLayer.getBoundingClientRect().height : 0;\r\n\t\t\tif (this.tooltipPos?.base === 'top') {\r\n\t\t\t\tconst bulletsBottom = getCssValFloat(this.bulletsLayer, 'bottom', 0);\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: this.tooltipBB.height,\r\n\t\t\t\t\tbottom: bulletsBottom + bulletsHeight\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst bulletsTop = areBulletsFixed ? getCssValFloat(this.bulletsLayer, 'top', 0) : 0;\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: bulletsTop + bulletsHeight,\r\n\t\t\t\t\tbottom: this.tooltipEl.getBoundingClientRect().height\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { top: 0, bottom: 0 };\r\n\t}\r\n\r\n\tisProgressBarEnabled() {\r\n\t\treturn this.stepItems.length > 1;\r\n\t}\r\n\r\n\tisStickyThemeOnTop() {\r\n\t\treturn this.isStickyTheme() && this.tooltipPos?.base === 'top';\r\n\t}\r\n\r\n\r\n\tgetFlierBB(targetBB, numberBB) {\r\n\t\treturn DpitBB.intersect(DpitBB.merge(targetBB, numberBB), this.docBB);\r\n\t}\r\n\r\n\tactualizeTooltipMinWidth() {\r\n\t\tif (this.winBB.width > 800) {// in css atS\r\n\t\t\tthis.actualizeStickyTooltipHeight();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.actualizeStickyTooltipHeight();\r\n\t\t\tsuper.actualizeTooltipMinWidth();\r\n\t\t}\r\n\t}\r\n\r\n\tactualizeTheme(theme, accentColor = null) {\r\n\t\tsuper.actualizeTheme(theme, accentColor);\r\n\t\tthis.actualizeProgressBar();\r\n\t}\r\n\r\n\tactualizeTooltipMaxWidth() {\r\n\t\tthis.tooltipEl.style.maxWidth = '';\r\n\t}\r\n\r\n\r\n\tactualizeStickyTooltipHeight() {\r\n\t\tif (this.tooltipEl) {\r\n\t\t\tthis.buttonPrevNextWrapEl.classList.remove(\r\n\t\t\t\tCLASSES_CORE.buttonPrevNextWrap + MODIFIERS.vert\r\n\t\t\t);\r\n\t\t\tthis.actualizeButtonsTextVisibility(false);\r\n\t\t\tconst buttonsPrevNextWrapHeight = this.buttonPrevNextWrapEl.getBoundingClientRect().height;\r\n\t\t\tlet tooltipElHeight = this.tooltipEl.offsetHeight;\r\n\t\t\tif (tooltipElHeight > 4 * buttonsPrevNextWrapHeight) {\r\n\t\t\t\tthis.buttonPrevNextWrapEl.classList.add(CLASSES_CORE.buttonPrevNextWrap + MODIFIERS.vert);\r\n\t\t\t\t//if (this.options.labeling.button_arrows === 'vector' || this.options.labeling.button_arrows === 'text') {\r\n\t\t\t\ttooltipElHeight = $(this.tooltipEl).height();\r\n\t\t\t\tif (tooltipElHeight > 0.5 * this.winBB.height) {\r\n\t\t\t\t\tthis.actualizeButtonsTextVisibility(true);\r\n\t\t\t\t}\r\n\t\t\t\t//}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tloadCancelButtonIcons() {\r\n\t\tsuper.loadCancelButtonIcons('vector');\r\n\t}\r\n\r\n\t/*actualizeStepNumber() {\r\n\t\tif (!this.stepItem || this.isDummyMode()) {\r\n\t\t\thideElement(this.numberEl, false);\r\n\t\t} else {\r\n\t\t\tthis.actualizeStepNumberEl(this.numberEl);\r\n\t\t}\r\n\t\tthis.actualizeStepNumberEl(this.numberElSec);\r\n\t}*/\r\n\r\n\t/*createLayers() {\r\n\t\t//super.createLayers();\r\n\t\t//hideElement(this.numberEl, false);\r\n\t\t//this.numberElSec = this.createNumberLayer(MODIFIERS.sec);\r\n\t\t//this.tooltipEl.prepend(this.numberElSec);\r\n\t}*/\r\n\r\n\tunplugTheme() {\r\n\t\t//this.numberElSec?.remove();\r\n\t\tshowElement(this.arrowEl);\r\n\t\tdocument.documentElement.classList.remove(CLASSES_CORE.isStickyTheme);\r\n\t}\r\n\r\n}","import {\r\n\tEVENTS, REFRESH_REASONS\r\n} from './constants';\r\nimport DpitCoreSticky from './DpitCoreSticky';\r\nimport DpitHooks from '../../../../../includes/assets/js/modules/DpitHooks';\r\nimport {\r\n\tremoveURLParameters,\r\n\tabsToRelativeUrl,\r\n\tinitStepParams,\r\n\tunifyUrl\r\n} from '../../../../../includes/assets/js/modules/dpitUtilsInc';\r\nimport { TargetType } from '../../apps/TourStepEditor/store/appMode';\r\nimport DpitBB from './DpitBB';\r\nimport { i18n } from '../dpitUtilsPublic';\r\n\r\n\r\nexport const LAYER_CLASSES_BUILDER = {\r\n\tbuilderMode: 'dpit-builder-mode',\r\n\tbuilderInRun: 'dpit-bon',\r\n\tbuilder: 'dpit-builder',\r\n\tstepEditMode: 'dpit-step-edit-mode',\r\n\ttargetSelectingMode: 'dpit-target-selecting',\r\n\thovered: 'dpit-hovered'\r\n};\r\n\r\nexport default class DpitBuilderCore extends DpitCoreSticky {\r\n\tconstructor(wrapEl, mainCfg, tourCfg) {\r\n\t\tif (mainCfg.dpDebugEn) console.log('[dpit] INIT DpitBuilderCore');\r\n\t\tsuper(wrapEl, mainCfg, tourCfg);\r\n\r\n\t\tthis.tourCfg = tourCfg;\r\n\t\tthis.mainCfg = mainCfg;\r\n\t\tthis.optionsOverride = {\r\n\t\t\texitOnOverlayClick: false,\r\n\t\t\texitOnEsc: false,\r\n\t\t\t//centerTopBottomPosOffset: 120,\r\n\t\t\tleaveOverlayAlways: true\r\n\t\t};\r\n\r\n\t\tthis.options = { ...this.options, ...this.optionsOverride };\r\n\t\tDpitHooks.init(mainCfg.dpDebugEn);\r\n\t\tDpitHooks.addAction(EVENTS.onInit, () => {\r\n\t\t\tif (this.buttonPrevEl) {\r\n\t\t\t\t$(this.buttonPrevEl).hover(\r\n\t\t\t\t\t() => this.doAction(EVENTS.onButtonHover, { id: 'back', hoverIn: true }),\r\n\t\t\t\t\t() => this.doAction(EVENTS.onButtonHover, { id: 'back', hoverIn: false })\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.buttonNextEl) {\r\n\t\t\t\t$(this.buttonNextEl).hover(\r\n\t\t\t\t\t() => this.doAction(EVENTS.onButtonHover, { id: 'next', hoverIn: true }),\r\n\t\t\t\t\t() => this.doAction(EVENTS.onButtonHover, { id: 'next', hoverIn: false })\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.documentElement.classList.add(LAYER_CLASSES_BUILDER.builderMode);\r\n\t}\r\n\r\n\tsetAsEditMode(isEditMode) {\r\n\t\tif (isEditMode) {\r\n\t\t\tdocument.documentElement.classList.add(LAYER_CLASSES_BUILDER.stepEditMode);\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.classList.remove(LAYER_CLASSES_BUILDER.stepEditMode);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Start a new intro tour\r\n\t*\r\n\t* @api private\r\n\t* @method startByFirstStepItem\r\n\t*/\r\n\tstartByFirstStepItem(firstStepItem) {\r\n\t\tthis.hideIntroLayers(false, true, true);\r\n\t\tthis.stepItems = [firstStepItem];\r\n\t\tthis.actualizeCurrentStep(firstStepItem);\r\n\t\tthis.startCoreBasic(false, firstStepItem.stepIdx);\r\n\t\t//this.showIntroLayers();\r\n\t}\r\n\r\n\tstartCore(isBackward = false, startStep = 0) {\r\n\t\tif (this.mainCfg.builderMode !== TargetType.TRIGGER) {\r\n\t\t\tsuper.startCore(isBackward, startStep);\r\n\t\t}\r\n\t}\r\n\r\n\tshowBackgroundOverlay() {\r\n\t\tif (this.mainCfg.builderMode !== TargetType.TRIGGER) {\r\n\t\t\tsuper.showBackgroundOverlay();\r\n\t\t}\r\n\t}\r\n\r\n\tinitSteps() {\r\n\t\tconst isAnyStepItem = super.initSteps();\r\n\t\tthis.doAction(EVENTS.onNoStepsInit);\r\n\t\treturn isAnyStepItem;\r\n\t}\r\n\r\n\tsetInRunClasses() {\r\n\t\tdocument.documentElement.classList.add(LAYER_CLASSES_BUILDER.builderInRun);\r\n\t\tsuper.setInRunClasses();\r\n\t}\r\n\r\n\tclearInRunClasses() {\r\n\t\tdocument.documentElement.classList.remove(LAYER_CLASSES_BUILDER.builderInRun);\r\n\t\tsuper.setInRunClasses();\r\n\t}\r\n\r\n\tshouldBeStepSkipped(stepItem, isTargetInMobileMenu) {\r\n\t\tif (this.mainCfg.builderMode === TargetType.STEP && !this.mainCfg.mobileAltStepMode) {\r\n\t\t\treturn super.shouldBeStepSkipped(stepItem, isTargetInMobileMenu);\r\n\t\t}\r\n\t\telse return false;\r\n\t}\r\n\r\n\tstatic initBuilderContainer(mainElement) {\r\n\t\tlet dpIntroBuilderContainer = document.createElement('div');\r\n\t\tdpIntroBuilderContainer.className = LAYER_CLASSES_BUILDER.builder;\r\n\t\tmainElement.appendChild(dpIntroBuilderContainer);\r\n\t\treturn dpIntroBuilderContainer;\r\n\t}\r\n\r\n\tpauseTour(addDocumentClass = '', leaveActiveOverlay = false) {\r\n\t\tif (!leaveActiveOverlay) {\r\n\t\t\tthis.hideShadowOverlay();\r\n\t\t\tthis.hideBackgroundOverlay();\r\n\t\t}\r\n\t\tif (this.mainCfg.builderMode === TargetType.STEP)\r\n\t\t\tsuper.pauseTour(addDocumentClass);\r\n\t}\r\n\r\n\trestoreTour(removeDocumentClass = '', reason = REFRESH_REASONS.restore, firstStepItem = null) {\r\n\t\tif (!this.showIntroLayersDisabled) this.showShadowOverlay();\r\n\t\tif (this.mainCfg.builderMode === TargetType.STEP) {\r\n\t\t\tif (firstStepItem) {\r\n\t\t\t\tthis.stepItems = [firstStepItem];\r\n\t\t\t\tthis.actualizeCurrentStep(firstStepItem);\r\n\t\t\t}\r\n\t\t\tthis.actualizeThemeSpecifier(this.tourCfg.theme);\r\n\t\t\tsuper.restoreTour(removeDocumentClass, reason);\r\n\t\t}\r\n\t}\r\n\r\n\tgetOnBeforeUnloadByLinkClickConfirmMessage() {\r\n\t\treturn i18n('end-a-tour-builder-q', this.mainCfg.i18n);\r\n\t}\r\n\r\n\tactualizeNavigButtonHoverState(isNextButton, isHovered) {\r\n\t\tconst element = isNextButton ? this.buttonNextEl : this.buttonPrevEl;\r\n\t\tif (isHovered) {\r\n\t\t\telement.classList.add(LAYER_CLASSES_BUILDER.hovered);\r\n\t\t} else {\r\n\t\t\telement.classList.remove(LAYER_CLASSES_BUILDER.hovered);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tshowIntroLayers(showWrapper = true) {\r\n\t\tif (!this.showIntroLayersDisabled) super.showIntroLayers(showWrapper);\r\n\t}\r\n\r\n\tstepObject4Hooks(stepItem) {\r\n\t\treturn stepItem ?? null;\r\n\t}\r\n\r\n\tsetOptions(options) {\r\n\t\tsuper.setOptions({ ...options, ...this.optionsOverride });\r\n\t}\r\n\r\n\r\n\tonSkipButtonClick() {\r\n\t\talert(this.mainCfg.i18n.tour_ending_in_builder);\r\n\t}\r\n\r\n\tactualizeEditPanelEl() {\r\n\t\tif (!this.editPanelEl) this.editPanelEl = document.querySelector('.dp-pull-out-panel');\r\n\t\tif (this.editPanelEl) this.editPanelBB = DpitBB.fromElement(this.editPanelEl, true);\r\n\t\telse this.editPanelBB = null;\r\n\t}\r\n\r\n\tisStickyEditPanel() {\r\n\t\treturn this.winBB && this.winBB.width <= 480; // edit panel sticky on bottom under 480px\r\n\t}\r\n\r\n\tisStickyEditPanelOpened() {\r\n\t\tthis.actualizeEditPanelEl();\r\n\t\treturn this.isStickyEditPanel() && this.editPanelEl?.classList.contains('dp-pull-out-panel--active');\r\n\t}\r\n\r\n\tforceScrollTopOffset() {\r\n\t\treturn this.isStickyEditPanelOpened();\r\n\t}\r\n\r\n\r\n\tfilterWinBoardMargin(margin) {\r\n\t\tmargin = super.filterWinBoardMargin(margin);\r\n\t\tif (this.isStickyEditPanelOpened()) {\r\n\t\t\tconst builderEditPanelBB = DpitBB.fromElement(this.editPanelEl, true);\r\n\t\t\tif (builderEditPanelBB) {\r\n\t\t\t\tmargin.bottom = builderEditPanelBB.height + this.options.defaultBoardMarginPx.y * this.options.defaultWinBoardMarginMobSizeCoef;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn margin;\r\n\t}\r\n\r\n\tfilterTooltipElRelPos(elRelPos) {\r\n\t\tif (this.isDummyMode() && this.isStickyEditPanelOpened() && this.winBB && this.winBoardBB && this.tooltipBB && this.targetBB) {\r\n\t\t\tif (this.tooltipBB.height >= this.winBoardBB.height) {\r\n\t\t\t\telRelPos.top = this.winBoardBB.top - this.targetBB.top;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst freeHeight = this.editPanelBB ? this.winBB.height - this.editPanelBB.height : this.winBoardBB.height;\r\n\t\t\t\telRelPos.top = (freeHeight - this.tooltipBB.height) / 2 - this.targetBB.top;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn elRelPos;\r\n\t}\r\n\r\n\taddNewStepAt = (stepIdx = null) => {\r\n\t\tif (stepIdx === null) stepIdx = this.stepIdx;\r\n\r\n\t\tconst currentUrl = removeURLParameters(window.location.href, this.mainCfg.queryParamsDefs);\r\n\t\tconst currentUrlRel = absToRelativeUrl(currentUrl, this.mainCfg.siteUrl);\r\n\r\n\t\tconst newStepBasic = {\r\n\t\t\t...initStepParams(this.mainCfg.stepDefinitions),\r\n\t\t\tisNewStep: true,\r\n\t\t\tidx: stepIdx,\r\n\t\t\tstep: stepIdx + 1,\r\n\t\t\turl: stepIdx > 0 ? '$keep-prev-step-url' : unifyUrl(currentUrlRel, false)\r\n\t\t};\r\n\r\n\t\tconst newStep = {\r\n\t\t\t...newStepBasic,\r\n\t\t\tselector: newStepBasic.element,\r\n\t\t\telement: $(newStepBasic.element)[0] || null,\r\n\t\t\turl: stepIdx > 0 ? '$keep-prev-step-url' : currentUrl\r\n\t\t};\r\n\r\n\t\tif (stepIdx < this.stepItems.length) {\r\n\t\t\tfor (let i = stepIdx; i < this.stepItems.length; i++) {\r\n\t\t\t\tconst stepItem = this.stepItems[i];\r\n\t\t\t\tthis.updateIndexOfStepItem(stepItem, stepItem.idx + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.options.showBullets) {\r\n\t\t\t$(this.bulletsLayer).find('ul').append(this.createBullet(this.stepItems.length + 1, true, false, this.onNavigBulletClick.bind(this)));\r\n\t\t}\r\n\t\tthis.stepItems.splice(stepIdx, 0, newStep);\r\n\t\treturn {\r\n\t\t\tstepItemBase: newStepBasic,\r\n\t\t\tstepItem: newStep\r\n\t\t};\r\n\t};\r\n\r\n\tremoveStepAt = (stepIdx = null) => {\r\n\t\tif (stepIdx === null) stepIdx = this.stepIdx;\r\n\t\tconst isAtEnd = stepIdx === this.stepItems.length - 1;\r\n\t\tif (stepIdx < this.stepItems.length) {\r\n\t\t\tfor (let i = stepIdx; i < this.stepItems.length; i++) {\r\n\t\t\t\tconst stepItem = this.stepItems[i];\r\n\t\t\t\tthis.updateIndexOfStepItem(stepItem, stepItem.idx - 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.stepItems.splice(stepIdx, 1);\r\n\t\tconst newStepIdx = isAtEnd ? this.stepIdx - 1 : this.stepIdx;\r\n\t\tif (this.options.showBullets) {\r\n\t\t\t$(this.bulletsLayer).find('ul li:last-child').remove();\r\n\t\t}\r\n\t\treturn newStepIdx >= 0 ? this.stepItems[newStepIdx] : null;\r\n\t};\r\n\r\n}"],"sourceRoot":""}