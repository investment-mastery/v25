{"version":3,"sources":["webpack:///./public/assets/js/modules/core/DpitTarget.js"],"names":["DpitTarget","constructor","element","_defineProperty","className","this","classList","contains","$element","$","beforeOffset","offset","add","afterOffset","setOffset","Math","abs","top","attrsBkp","style","left","cssPosition","getComputedStyle","getPropertyValue","analysis","isSticky","isFixed","hasAltPosition","includes","process","CLASSES_CORE","target","addClassSafe","relativePosition","destroy","remove","removeClassSafe","Object","keys","forEach","propName","setAttribute"],"mappings":";;;;;;;;;;;;;;;;2LAEe,MAAMA,EAOpBC,YAAYC,GAASC,YAAA,oBA2BLC,IACf,IAAKC,KAAKH,QAAQI,UAAUC,SAASH,GAAY,CAChD,MAAMI,EAAWC,EAAEJ,KAAKH,SAClBQ,EAAeF,EAASG,SAC9BN,KAAKH,QAAQI,UAAUM,IAAIR,GAC3B,MAAMS,EAAcL,EAASG,SAE7B,IAAIG,GAAY,EACZC,KAAKC,IAAIH,EAAYI,IAAMP,EAAaO,KAAO,IAClDZ,KAAKa,SAASD,IAAMZ,KAAKH,QAAQiB,MAAMF,IACvCH,GAAY,GAGTC,KAAKC,IAAIH,EAAYO,KAAOV,EAAaU,MAAQ,IACpDf,KAAKa,SAASE,KAAOf,KAAKH,QAAQiB,MAAMC,KACxCN,GAAY,GAETA,GACHN,EAASG,OAAOD,MA5ClBL,KAAKH,QAAUA,EACf,MACMmB,EADgBC,iBAAiBpB,GACLqB,iBAAiB,YACnDlB,KAAKmB,SAAW,CACfC,SAA0B,WAAhBJ,EACVK,QAAyB,UAAhBL,EACTM,eAAgB,CAAC,QAAS,SAAU,YAAYC,SAASP,IAK3DQ,UACCxB,KAAKa,SAAW,GAChBb,KAAKH,QAAQI,UAAUM,IAAIkB,eAAaC,QACpC1B,KAAKmB,SAASG,gBACjBtB,KAAK2B,aAAaF,eAAaG,kBAKjCC,UACC7B,KAAKH,QAAQI,UAAU6B,OAAOL,eAAaC,QAC3C1B,KAAK+B,gBAAgBN,eAAaG,kBA2BnCG,gBAAgBhC,GACXC,KAAKH,QAAQI,UAAUC,SAASH,IACnCC,KAAKH,QAAQI,UAAU6B,OAAO/B,GAE3BC,KAAKa,UACRmB,OAAOC,KAAKjC,KAAKa,UAAUqB,QAAQC,IAClCnC,KAAKH,QAAQuC,aAAaD,EAAUnC,KAAKa,SAASsB","file":"main/DpitTarget-adfbd9aa.js","sourcesContent":["import { CLASSES_CORE } from './constants';\r\n\r\nexport default class DpitTarget {\r\n\r\n\t/**\r\n\t * Initialize target object\r\n\t *\r\n\t * @param {Element} element\r\n\t*/\r\n\tconstructor(element) {\r\n\t\tthis.element = element;\r\n\t\tconst computedStyle = getComputedStyle(element);\r\n\t\tconst cssPosition = computedStyle.getPropertyValue('position');\r\n\t\tthis.analysis = {\r\n\t\t\tisSticky: cssPosition === 'sticky',\r\n\t\t\tisFixed: cssPosition === 'fixed',\r\n\t\t\thasAltPosition: ['fixed', 'sticky', 'absolute'].includes(cssPosition),\r\n\t\t\t//isSvg: element.tagName.toLowerCase() === 'svg',\r\n\t\t};\r\n\t}\r\n\r\n\tprocess() {\r\n\t\tthis.attrsBkp = {};\r\n\t\tthis.element.classList.add(CLASSES_CORE.target);\r\n\t\tif (this.analysis.hasAltPosition) {\r\n\t\t\tthis.addClassSafe(CLASSES_CORE.relativePosition);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tdestroy() {\r\n\t\tthis.element.classList.remove(CLASSES_CORE.target);\r\n\t\tthis.removeClassSafe(CLASSES_CORE.relativePosition);\r\n\t}\r\n\r\n\r\n\taddClassSafe = (className) => {\r\n\t\tif (!this.element.classList.contains(className)) {\r\n\t\t\tconst $element = $(this.element);\r\n\t\t\tconst beforeOffset = $element.offset();\r\n\t\t\tthis.element.classList.add(className);\r\n\t\t\tconst afterOffset = $element.offset();\r\n\r\n\t\t\tlet setOffset = false;\r\n\t\t\tif (Math.abs(afterOffset.top - beforeOffset.top) > 1) {\r\n\t\t\t\tthis.attrsBkp.top = this.element.style.top;\r\n\t\t\t\tsetOffset = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (Math.abs(afterOffset.left - beforeOffset.left) > 1) {\r\n\t\t\t\tthis.attrsBkp.left = this.element.style.left;\r\n\t\t\t\tsetOffset = true;\r\n\t\t\t}\r\n\t\t\tif (setOffset) {\r\n\t\t\t\t$element.offset(beforeOffset);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tremoveClassSafe(className) {\r\n\t\tif (this.element.classList.contains(className)) {\r\n\t\t\tthis.element.classList.remove(className);\r\n\t\t}\r\n\t\tif (this.attrsBkp) {\r\n\t\t\tObject.keys(this.attrsBkp).forEach(propName => {\r\n\t\t\t\tthis.element.setAttribute(propName, this.attrsBkp[propName]);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}"],"sourceRoot":""}